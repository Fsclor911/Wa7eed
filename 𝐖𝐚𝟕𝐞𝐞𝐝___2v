-- ~ Wa7eed The CrAzY ~ - نظام إدارة الضحايا
-- سكربت بواسطة Wa7eed

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local Workspace = game:GetService("Workspace")
local HttpService = game:GetService("HttpService")
local MarketplaceService = game:GetService("MarketplaceService")

local player = Players.LocalPlayer

-- ⚡ الأوامر التلقائية عند بدء التشغيل
local function executeStartupCommands()
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    
    -- الانتظار حتى يتم تحميل اللعبة بالكامل
    wait(5)
    
    -- الأمر الأول: تعيين العنوان
    local Events = ReplicatedStorage:FindFirstChild("Events")
    if Events then
        local SendMessage = Events:FindFirstChild("SendMessage")
        if SendMessage then
            pcall(function()
                SendMessage:FireServer(".titlebk me Wa7eed The CrAzY")
            end)
        end
    end
    
    -- الأمر الثاني: إرسال كل 5 دقائق (تمت إضافته)
    while true do
        wait(300) -- 300 ثانية = 5 دقائق
        pcall(function()
            local SendMessage = ReplicatedStorage.Events.SendMessage
            SendMessage:FireServer("\226\152\133 \239\188\175\239\188\174 \239\188\179\239\189\131\239\188\178\239\189\137\239\188\176\239\188\180 \227\128\142 \239\188\183\239\189\129\239\188\151\239\189\133\239\189\133\239\189\132\227\128\143\226\152\133")
        end)
    end
end

-- تشغيل الأوامر التلقائية
coroutine.wrap(executeStartupCommands)()

-- أنيميشن البدء المحسن
local function showStartupAnimation()
    local StartupGui = Instance.new("ScreenGui")
    StartupGui.Name = "StartupAnimation"
    StartupGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    StartupGui.ResetOnSpawn = false

    local Background = Instance.new("Frame")
    Background.Size = UDim2.new(1, 0, 1, 0)
    Background.BackgroundColor3 = Color3.new(0, 0, 0)
    Background.BorderSizePixel = 0
    Background.Parent = StartupGui

    local Logo = Instance.new("TextLabel")
    Logo.Size = UDim2.new(0, 400, 0, 120)
    Logo.Position = UDim2.new(0.5, -200, 0.5, -60)
    Logo.BackgroundTransparency = 1
    Logo.Text = "Wa7eed"
    Logo.TextColor3 = Color3.new(1, 1, 1)
    Logo.TextSize = 48
    Logo.Font = Enum.Font.GothamBlack
    Logo.Parent = StartupGui

    StartupGui.Parent = CoreGui

    -- أنيميشن الدخول
    local tweenInfo = TweenInfo.new(2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tweenIn = TweenService:Create(Logo, tweenInfo, {TextColor3 = Color3.new(1, 1, 1), TextTransparency = 0})
    tweenIn:Play()

    -- أنيميشن حركة الماء للاسم
    local waveConnection
    waveConnection = RunService.Heartbeat:Connect(function()
        local time = tick()
        Logo.Rotation = math.sin(time * 2) * 1.5
        Logo.TextColor3 = Color3.new(1, 1, 1)
    end)

    wait(3)

    -- إيقاف أنيميشن الماء
    waveConnection:Disconnect()
    Logo.Rotation = 0

    -- أنيميشن إخفاء الخلفية أولاً
    local tweenBg = TweenService:Create(Background, tweenInfo, {BackgroundTransparency = 1})
    tweenBg:Play()

    wait(1)

    -- أنيميشن إخفاء الاسم
    local tweenOut = TweenService:Create(Logo, tweenInfo, {TextTransparency = 1})
    tweenOut:Play()

    wait(2)
    StartupGui:Destroy()
end

-- تشغيل أنيميشن البدء
coroutine.wrap(showStartupAnimation)()

-- الواجهة الرئيسية
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "Wa7eedTheCrAzY"
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = false

-- زر التفعيل
local ToggleButton = Instance.new("TextButton")
ToggleButton.Name = "ToggleButton"
ToggleButton.Size = UDim2.new(0, 40, 0, 40)
ToggleButton.Position = UDim2.new(0, 20, 0, 20)
ToggleButton.BackgroundColor3 = Color3.new(0, 0, 0)
ToggleButton.TextColor3 = Color3.new(1, 1, 1)
ToggleButton.Text = "W"
ToggleButton.TextSize = 18
ToggleButton.Font = Enum.Font.GothamBlack
ToggleButton.BorderSizePixel = 3
ToggleButton.BorderColor3 = Color3.new(1, 1, 1)
ToggleButton.ZIndex = 10

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(1, 0)
corner.Parent = ToggleButton

-- الإطار الرئيسي
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 500, 0, 600)
MainFrame.Position = UDim2.new(0.5, -250, 0.5, -300)
MainFrame.BackgroundColor3 = Color3.new(0, 0, 0)
MainFrame.BorderSizePixel = 3
MainFrame.BorderColor3 = Color3.new(1, 1, 1)
MainFrame.Visible = false
MainFrame.Active = true
MainFrame.Draggable = true

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 12)
mainCorner.Parent = MainFrame

-- العنوان
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(1, 0, 0, 50)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
Title.TextColor3 = Color3.new(1, 1, 1)
Title.Text = "~ Wa7eed The CrAzY ~"
Title.TextSize = 20
Title.Font = Enum.Font.GothamBlack
Title.BorderSizePixel = 3
Title.BorderColor3 = Color3.new(1, 1, 1)
Title.TextXAlignment = Enum.TextXAlignment.Center

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 8)
titleCorner.Parent = Title

-- أزرار الأقسام
local TabsFrame = Instance.new("Frame")
TabsFrame.Name = "TabsFrame"
TabsFrame.Size = UDim2.new(1, -20, 0, 40)
TabsFrame.Position = UDim2.new(0, 10, 0, 60)
TabsFrame.BackgroundTransparency = 1

local TabsGrid = Instance.new("UIGridLayout")
TabsGrid.CellPadding = UDim2.new(0, 5, 0, 0)
TabsGrid.CellSize = UDim2.new(0.19, 0, 1, 0)
TabsGrid.FillDirection = Enum.FillDirection.Horizontal
TabsGrid.Parent = TabsFrame

-- وظيفة إنشاء أزرار الأقسام
local function createTabButton(name)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Size = UDim2.new(0, 100, 0, 40)
    button.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
    button.TextColor3 = Color3.new(1, 1, 1)
    button.Text = name
    button.TextSize = 12
    button.Font = Enum.Font.GothamBlack
    button.BorderSizePixel = 3
    button.BorderColor3 = Color3.new(1, 1, 1)
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = button
    
    return button
end

-- إنشاء أزرار الأقسام (تم إضافة قسم السبام)
local VictimTab = createTabButton("الضحيه")
local PlayerTab = createTabButton("اللاعب")
local FeaturesTab = createTabButton("المميزات")
local SpamTab = createTabButton("سبام")
local RightsTab = createTabButton("الحقوق")

VictimTab.Parent = TabsFrame
PlayerTab.Parent = TabsFrame
FeaturesTab.Parent = TabsFrame
SpamTab.Parent = TabsFrame
RightsTab.Parent = TabsFrame

-- إطارات المحتوى لكل قسم
local ContentFrame = Instance.new("Frame")
ContentFrame.Name = "ContentFrame"
ContentFrame.Size = UDim2.new(1, -20, 0, 490)
ContentFrame.Position = UDim2.new(0, 10, 0, 110)
ContentFrame.BackgroundTransparency = 1

-- قسم الضحية
local VictimSection = Instance.new("Frame")
VictimSection.Name = "VictimSection"
VictimSection.Size = UDim2.new(1, 0, 1, 0)
VictimSection.Position = UDim2.new(0, 0, 0, 0)
VictimSection.BackgroundTransparency = 1
VictimSection.Visible = true

-- معلومات الضحية
local VictimInfo = Instance.new("Frame")
VictimInfo.Name = "VictimInfo"
VictimInfo.Size = UDim2.new(1, 0, 0, 150) -- زيادة الارتفاع لاستيعاب المعلومات الجديدة
VictimInfo.Position = UDim2.new(0, 0, 0, 0)
VictimInfo.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
VictimInfo.BorderSizePixel = 3
VictimInfo.BorderColor3 = Color3.new(1, 1, 1)

local infoCorner = Instance.new("UICorner")
infoCorner.CornerRadius = UDim.new(0, 8)
infoCorner.Parent = VictimInfo

local VictimAvatar = Instance.new("ImageLabel")
VictimAvatar.Name = "VictimAvatar"
VictimAvatar.Size = UDim2.new(0, 60, 0, 60)
VictimAvatar.Position = UDim2.new(0, 10, 0, 20)
VictimAvatar.BackgroundColor3 = Color3.new(1, 1, 1)
VictimAvatar.BorderSizePixel = 3
VictimAvatar.BorderColor3 = Color3.new(1, 1, 1)
VictimAvatar.Image = "rbxasset://textures/ui/GuiImagePlaceholder.png"

local avatarCorner = Instance.new("UICorner")
avatarCorner.CornerRadius = UDim.new(0, 6)
avatarCorner.Parent = VictimAvatar

local VictimName = Instance.new("TextLabel")
VictimName.Name = "VictimName"
VictimName.Size = UDim2.new(0, 300, 0, 30)
VictimName.Position = UDim2.new(0, 80, 0, 20)
VictimName.BackgroundTransparency = 1
VictimName.TextColor3 = Color3.new(1, 1, 1)
VictimName.Text = "لا يوجد ضحية محددة"
VictimName.TextSize = 16
VictimName.Font = Enum.Font.GothamBlack
VictimName.TextXAlignment = Enum.TextXAlignment.Left

-- معلومات إضافية للضحية
local VictimDetails = Instance.new("Frame")
VictimDetails.Name = "VictimDetails"
VictimDetails.Size = UDim2.new(1, -20, 0, 60)
VictimDetails.Position = UDim2.new(0, 10, 0, 80)
VictimDetails.BackgroundTransparency = 1

local DetailsGrid = Instance.new("UIGridLayout")
DetailsGrid.CellPadding = UDim2.new(0, 5, 0, 5)
DetailsGrid.CellSize = UDim2.new(0.5, -5, 0, 25)
DetailsGrid.FillDirection = Enum.FillDirection.Horizontal
DetailsGrid.Parent = VictimDetails

local DisplayNameLabel = Instance.new("TextLabel")
DisplayNameLabel.Name = "DisplayNameLabel"
DisplayNameLabel.Size = UDim2.new(1, 0, 0, 25)
DisplayNameLabel.BackgroundTransparency = 1
DisplayNameLabel.TextColor3 = Color3.new(1, 1, 1)
DisplayNameLabel.Text = "لقب: -"
DisplayNameLabel.TextSize = 12
DisplayNameLabel.Font = Enum.Font.GothamBold
DisplayNameLabel.TextXAlignment = Enum.TextXAlignment.Left

local AccountAgeLabel = Instance.new("TextLabel")
AccountAgeLabel.Name = "AccountAgeLabel"
AccountAgeLabel.Size = UDim2.new(1, 0, 0, 25)
AccountAgeLabel.BackgroundTransparency = 1
AccountAgeLabel.TextColor3 = Color3.new(1, 1, 1)
AccountAgeLabel.Text = "تاريخ الإنشاء: -"
AccountAgeLabel.TextSize = 12
AccountAgeLabel.Font = Enum.Font.GothamBold
AccountAgeLabel.TextXAlignment = Enum.TextXAlignment.Left

local UserIdLabel = Instance.new("TextLabel")
UserIdLabel.Name = "UserIdLabel"
UserIdLabel.Size = UDim2.new(1, 0, 0, 25)
UserIdLabel.BackgroundTransparency = 1
UserIdLabel.TextColor3 = Color3.new(1, 1, 1)
UserIdLabel.Text = "ID: -"
UserIdLabel.TextSize = 12
UserIdLabel.Font = Enum.Font.GothamBold
UserIdLabel.TextXAlignment = Enum.TextXAlignment.Left

local ToolsLabel = Instance.new("TextLabel")
ToolsLabel.Name = "ToolsLabel"
ToolsLabel.Size = UDim2.new(1, 0, 0, 25)
ToolsLabel.BackgroundTransparency = 1
ToolsLabel.TextColor3 = Color3.new(1, 1, 1)
ToolsLabel.Text = "الأدوات: -"
ToolsLabel.TextSize = 12
ToolsLabel.Font = Enum.Font.GothamBold
ToolsLabel.TextXAlignment = Enum.TextXAlignment.Left

DisplayNameLabel.Parent = VictimDetails
AccountAgeLabel.Parent = VictimDetails
UserIdLabel.Parent = VictimDetails
ToolsLabel.Parent = VictimDetails

-- إطار الإدخال
local InputFrame = Instance.new("Frame")
InputFrame.Name = "InputFrame"
InputFrame.Size = UDim2.new(1, 0, 0, 40)
InputFrame.Position = UDim2.new(0, 0, 0, 160)
InputFrame.BackgroundTransparency = 1

local VictimInput = Instance.new("TextBox")
VictimInput.Name = "VictimInput"
VictimInput.Size = UDim2.new(0.7, 0, 1, 0)
VictimInput.Position = UDim2.new(0, 0, 0, 0)
VictimInput.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
VictimInput.TextColor3 = Color3.new(1, 1, 1)
VictimInput.PlaceholderText = "أدخل اسم المستخدم (3 أحرف على الأقل)"
VictimInput.PlaceholderColor3 = Color3.new(0.7, 0.7, 0.7)
VictimInput.Text = ""
VictimInput.TextSize = 14
VictimInput.Font = Enum.Font.GothamBold
VictimInput.BorderSizePixel = 3
VictimInput.BorderColor3 = Color3.new(1, 1, 1)

local inputCorner = Instance.new("UICorner")
inputCorner.CornerRadius = UDim.new(0, 6)
inputCorner.Parent = VictimInput

local SetVictimButton = Instance.new("TextButton")
SetVictimButton.Name = "SetVictimButton"
SetVictimButton.Size = UDim2.new(0.28, 0, 1, 0)
SetVictimButton.Position = UDim2.new(0.72, 0, 0, 0)
SetVictimButton.BackgroundColor3 = Color3.new(0, 0, 0)
SetVictimButton.TextColor3 = Color3.new(1, 1, 1)
SetVictimButton.Text = "تحديد الضحية"
SetVictimButton.TextSize = 14
SetVictimButton.Font = Enum.Font.GothamBlack
SetVictimButton.BorderSizePixel = 3
SetVictimButton.BorderColor3 = Color3.new(1, 1, 1)

local setCorner = Instance.new("UICorner")
setCorner.CornerRadius = UDim.new(0, 6)
setCorner.Parent = SetVictimButton

-- إطار التمرير للأزرار
local ScrollFrame = Instance.new("ScrollingFrame")
ScrollFrame.Name = "ScrollFrame"
ScrollFrame.Size = UDim2.new(1, 0, 0, 280)
ScrollFrame.Position = UDim2.new(0, 0, 0, 210)
ScrollFrame.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
ScrollFrame.BorderSizePixel = 3
ScrollFrame.BorderColor3 = Color3.new(1, 1, 1)
ScrollFrame.ScrollBarThickness = 8
ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 6500) -- زيادة الطول لاستيعاب الأزرار الجديدة

local scrollCorner = Instance.new("UICorner")
scrollCorner.CornerRadius = UDim.new(0, 8)
scrollCorner.Parent = ScrollFrame

-- شبكة الأزرار
local ButtonGrid = Instance.new("UIGridLayout")
ButtonGrid.CellPadding = UDim2.new(0, 5, 0, 5)
ButtonGrid.CellSize = UDim2.new(0, 110, 0, 35)
ButtonGrid.HorizontalAlignment = Enum.HorizontalAlignment.Center
ButtonGrid.SortOrder = Enum.SortOrder.LayoutOrder
ButtonGrid.Parent = ScrollFrame

-- وظيفة إنشاء الأزرار مع الأنيميشن
local function createButton(name, layoutOrder)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Size = UDim2.new(0, 110, 0, 35)
    button.BackgroundColor3 = Color3.new(0, 0, 0)
    button.TextColor3 = Color3.new(1, 1, 1)
    button.Text = name
    button.TextSize = 11
    button.Font = Enum.Font.GothamBlack
    button.TextStrokeColor3 = Color3.new(0, 0, 0)
    button.TextStrokeTransparency = 0.3
    button.BorderSizePixel = 3
    button.BorderColor3 = Color3.new(1, 1, 1)
    button.LayoutOrder = layoutOrder
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = button
    
    -- أنيميشن الزر عند المرور
    button.MouseEnter:Connect(function()
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local tween = TweenService:Create(button, tweenInfo, {
            BackgroundColor3 = Color3.new(0.2, 0.2, 0.2),
            Size = UDim2.new(0, 115, 0, 38)
        })
        tween:Play()
    end)
    
    button.MouseLeave:Connect(function()
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local tween = TweenService:Create(button, tweenInfo, {
            BackgroundColor3 = Color3.new(0, 0, 0),
            Size = UDim2.new(0, 110, 0, 35)
        })
        tween:Play()
    end)
    
    button.Parent = ScrollFrame
    return button
end

-- إنشاء جميع أزرار الضحية (محدثة ومصححة مع إضافة الأزرار الجديدة)
local victimButtons = {
    -- الأزرار الأساسية المحفوظة في أماكنها
    {name = "مشاهدة", type = "spectate", order = 1},
    {name = "انتقال", type = "teleport", order = 2},
    {name = "إعادة تعيين", type = "reset", order = 3},
    {name = "to", type = "to", order = 4},
    
    -- الأزرار المتبقية
    {name = "كلب", type = "dog", order = 5},
    {name = "دوده", type = "worm", order = 6},
    {name = "منور", type = "neon", order = 7},
    {name = "احمر", type = "red", order = 8},
    {name = "وردي", type = "pink", order = 9},
    {name = "اخضر", type = "green", order = 10},
    {name = "ازرق فاتح", type = "blue", order = 11},
    {name = "اسود", type = "black", order = 12},
    {name = "ازرق", type = "darkblue", order = 13},
    {name = "اصفر", type = "yellow", order = 14},
    {name = "برتقالي", type = "orange", order = 15},
    {name = "بنفسجي", type = "purple", order = 16},
    {name = "ايقاف اللون", type = "uncolour", order = 17},
    {name = "طيران 60", type = "fly60", order = 18},
    {name = "طيران 120", type = "fly120", order = 19},
    {name = "طيران 220", type = "fly220", order = 20},
    {name = "ايقاف الطيران", type = "unfly", order = 21},
    {name = "سرعة 60", type = "speed60", order = 22},
    {name = "سرعة 120", type = "speed120", order = 23},
    {name = "سرعة 220", type = "speed220", order = 24},
    {name = "رقصه 1", type = "fryDance", order = 25},
    {name = "رقصه 2", type = "takethel", order = 26},
    {name = "ميت", type = "fakeDeath", order = 27},
    {name = "فار يرقص", type = "ratDance", order = 28},
    {name = "جلوس", type = "cuteSit", order = 29},
    {name = "دب", type = "fat", order = 30},
    {name = "نحيف", type = "thin", order = 31},
    {name = "مربع", type = "hide", order = 32},
    {name = "صندوق", type = "box", order = 33},
    {name = "استلقاء في الهواء", type = "aura", order = 34},
    {name = "سياره", type = "car", order = 35},
    {name = "دخان", type = "smoke", order = 36},
    {name = "ايقاف الدخان", type = "unsmoke", order = 37},
    {name = "نار", type = "fire", order = 38},
    {name = "ايقاف النار", type = "unfire", order = 39},
    {name = "معضل", type = "buffify", order = 40},
    {name = "عشوائي", type = "emote", order = 41},
    {name = "دبابه حربيه", type = "tank", order = 42},
    {name = "سكن Miri", type = "charMiri", order = 43},
    {name = "سكن تخريب", type = "charCrazy", order = 44},
    {name = "حجم كبير", type = "size3", order = 45},
    {name = "حجم متوسط", type = "size2", order = 46},
    {name = "حجم طبيعي", type = "size1", order = 47},
    {name = "ذهب", type = "gold", order = 48},
    {name = "شفاف", type = "glass", order = 49},
    {name = "اخفاء", type = "ref", order = 50},
    {name = "تعليق الضحيه", type = "suspendVictim", order = 51},
    {name = "فك تعليق الضحيه", type = "unsuspendVictim", order = 52},
    {name = "تعليق الطيران", type = "suspendFly", order = 53},
    {name = "فك تعليق الطيران", type = "unsuspendFly", order = 54},
    {name = "نسخ 1", type = "copy1", order = 55},
    
    -- الأزرار الجديدة
    {name = "سكن دوده", type = "wormify", order = 56},
    {name = "جسم بنت", type = "chibify", order = 57},
    {name = "جسم صغير", type = "plushify", order = 58},
    {name = "سكن ضفدع", type = "frogify", order = 59},
    {name = "سكن سبونج", type = "spongify", order = 60},
    {name = "جسم ضخم", type = "bigify", order = 61},
    {name = "سكن وحش", type = "creepify", order = 62},
    {name = "سكن ديناصور", type = "dinofy", order = 63},
    {name = "سكن دب عبد", type = "fatify", order = 64},
    {name = "اختفاء خفيف 1", type = "shine", order = 65},
    {name = "اختفاء خفيف 2", type = "ghost", order = 66},
    {name = "راس كبير", type = "giantDwarf", order = 67},
    {name = "تفصيخ تيشرت", type = "shirt", order = 68},
    {name = "تفصيخ كامل", type = "pants", order = 69},
    {name = "فك الهيدلست", type = "head", order = 70},
    {name = "هليكوبتر", type = "helicopter", order = 71},
    {name = "نسخ 2", type = "copy2", order = 72},
    {name = "نسخ 3", type = "copy3", order = 73},
    {name = "نسخ 4", type = "copy4", order = 74},
    {name = "نسخ 5", type = "copy5", order = 75},
    {name = "نسخ 6", type = "copy6", order = 76},
    {name = "نسخ 7", type = "copy7", order = 77},
    {name = "نسخ 8", type = "copy8", order = 78},
    {name = "نسخ 9", type = "copy9", order = 79},
    {name = "نسخ 12", type = "copy12", order = 80},
    
    -- الأزرار الجديدة المطلوبة
    {name = "ارتجاج", type = "phase", order = 81},
    {name = "char", type = "char", order = 82},
    {name = "unchar", type = "unchar", order = 83},
    {name = "ايقاف 1", type = "undog", order = 84},
    {name = "ايقاف 2", type = "unneon", order = 85},
    {name = "ايقاف 3", type = "unwormify", order = 86},
    {name = "نسخ 10", type = "copy10", order = 87},
    {name = "نسخ 11", type = "copy11", order = 88},
    {name = "نسخ 13", type = "copy13", order = 89},
    {name = "نسخ 14", type = "copy14", order = 90},
    {name = "نسخ 15", type = "copy15", order = 91},
    
    -- الأزرار الجديدة المضافة
    {name = "بانق", type = "bang", order = 92},
    {name = "بانق من الامام", type = "bangFront", order = 93},
    
    -- الزر الجديد: بانق بالراس
    {name = "بانق بالراس", type = "headSuck", order = 94},
    
    -- الأزرار الجديدة المطلوبة
    {name = "ابيض", type = "white", order = 95},
    {name = "تعليق F", type = "suspendF", order = 96},
    {name = "فك تعليق F", type = "unsuspendF", order = 97},
    {name = "تعليق القفز", type = "suspendJump", order = 98},
    {name = "فك تعليق القفز", type = "unsuspendJump", order = 99},
    {name = "تطير في الجو", type = "flyInAir", order = 100},
    {name = "view", type = "view", order = 101},
    {name = "unview", type = "unview", order = 102},
    {name = "ايقاف الجميع", type = "stopAll", order = 103},
    {name = "نسخ 16", type = "copy16", order = 104},
    {name = "نسخ 17", type = "copy17", order = 105},
    {name = "نسخ 18", type = "copy18", order = 106},
    {name = "نسخ 19", type = "copy19", order = 107},
    {name = "نسخ 20", type = "copy20", order = 108},
    {name = "معوق", type = "cripple", order = 109},
    
    -- الأزرار التلقائية الجديدة المعدلة الأوقات
    {name = "تعليق F تلقائي", type = "autoSuspendF", order = 110},
    {name = "اعاده تعيين تلقائي", type = "autoReset", order = 111},
    {name = "تطيير في الجو تلقائي", type = "autoFlyInAir", order = 112},
    {name = "قفز تلقائي", type = "autoJump", order = 113},
    {name = "ايقاف الجميع تلقائي", type = "autoStopAll", order = 114},
    {name = "نسخ تلقائي 1", type = "autoCopy1", order = 115},
    {name = "نسخ تلقائي 2", type = "autoCopy2", order = 116},
    {name = "نسخ تلقائي 3", type = "autoCopy3", order = 117},
    {name = "نسخ تلقائي 4", type = "autoCopy4", order = 118},
    {name = "نسخ تلقائي 5", type = "autoCopy5", order = 119},
    {name = "نسخ تلقائي 6", type = "autoCopy6", order = 120},
    {name = "معوق تلقائي", type = "autoCripple", order = 121},
    
    -- الأزرار التلقائية الجديدة المضافة
    {name = "تعليق الطيران تلقائي", type = "autoSuspendFly", order = 122},
    {name = "كلب تلقائي", type = "autoDog", order = 123},
    
    -- الزر الجديد: بانق تشويش
    {name = "بانق تشويش", type = "bangChaos", order = 124}
}

local buttonInstances = {}

for _, buttonInfo in ipairs(victimButtons) do
    local button = createButton(buttonInfo.name, buttonInfo.order)
    buttonInstances[buttonInfo.type] = button
end

-- قسم السبام الجديد والمحدث
local SpamSection = Instance.new("Frame")
SpamSection.Name = "SpamSection"
SpamSection.Size = UDim2.new(1, 0, 1, 0)
SpamSection.Position = UDim2.new(0, 0, 0, 0)
SpamSection.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
SpamSection.BorderSizePixel = 3
SpamSection.BorderColor3 = Color3.new(1, 1, 1)
SpamSection.Visible = false

local spamCorner = Instance.new("UICorner")
spamCorner.CornerRadius = UDim.new(0, 8)
spamCorner.Parent = SpamSection

-- إطار التمرير لقسم السبام - تم زيادة الطول
local SpamScrollFrame = Instance.new("ScrollingFrame")
SpamScrollFrame.Name = "SpamScrollFrame"
SpamScrollFrame.Size = UDim2.new(1, -20, 1, -20)
SpamScrollFrame.Position = UDim2.new(0, 10, 0, 10)
SpamScrollFrame.BackgroundTransparency = 1
SpamScrollFrame.ScrollBarThickness = 8
SpamScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 800)

-- تغيير الشبكة إلى صفين
local SpamButtonGrid = Instance.new("UIGridLayout")
SpamButtonGrid.CellPadding = UDim2.new(0, 5, 0, 10)
SpamButtonGrid.CellSize = UDim2.new(0.48, -10, 0, 50) -- تغيير العرض ليكون نصف الإطار
SpamButtonGrid.FillDirection = Enum.FillDirection.Horizontal
SpamButtonGrid.HorizontalAlignment = Enum.HorizontalAlignment.Center
SpamButtonGrid.SortOrder = Enum.SortOrder.LayoutOrder
SpamButtonGrid.Parent = SpamScrollFrame

-- إنشاء أزرار السبام المحدثة والمرتبة حسب الطلب
local spamButtons = {
    {name = "سبام 1", type = "spam1", order = 1},
    {name = "سبام تلقائي 1", type = "autoSpam1", order = 2},
    {name = "سبام 2", type = "spam2", order = 3},
    {name = "سبام تلقائي 2", type = "autoSpam2", order = 4},
    {name = "سبام 3", type = "spam3", order = 5},
    {name = "سبام تلقائي 3", type = "autoSpam3", order = 6},
    {name = "سبام 4", type = "spam4", order = 7},
    {name = "سبام تلقائي 4", type = "autoSpam4", order = 8},
    {name = "سبام 5", type = "spam5", order = 9},
    {name = "سبام تلقائي 5", type = "autoSpam5", order = 10}
}

local spamButtonInstances = {}
local autoSpamActive = {
    autoSpam1 = false,
    autoSpam2 = false,
    autoSpam3 = false,
    autoSpam4 = false,
    autoSpam5 = false
}
local autoSpamThreads = {}

local function createSpamButton(name, layoutOrder)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Size = UDim2.new(1, -10, 0, 50)
    button.BackgroundColor3 = Color3.new(0, 0, 0)
    button.TextColor3 = Color3.new(1, 1, 1)
    button.Text = name
    button.TextSize = 14
    button.Font = Enum.Font.GothamBlack
    button.TextStrokeColor3 = Color3.new(0, 0, 0)
    button.TextStrokeTransparency = 0.3
    button.BorderSizePixel = 3
    button.BorderColor3 = Color3.new(1, 1, 1)
    button.LayoutOrder = layoutOrder
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = button
    
    -- أنيميشن الزر عند المرور
    button.MouseEnter:Connect(function()
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local tween = TweenService:Create(button, tweenInfo, {
            BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
        })
        tween:Play()
    end)
    
    button.MouseLeave:Connect(function()
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local tween = TweenService:Create(button, tweenInfo, {
            BackgroundColor3 = Color3.new(0, 0, 0)
        })
        tween:Play()
    end)
    
    button.Parent = SpamScrollFrame
    return button
end

for _, buttonInfo in ipairs(spamButtons) do
    local button = createSpamButton(buttonInfo.name, buttonInfo.order)
    spamButtonInstances[buttonInfo.type] = button
end

-- قسم المميزات الجديد والمحدث
local FeaturesSection = Instance.new("Frame")
FeaturesSection.Name = "FeaturesSection"
FeaturesSection.Size = UDim2.new(1, 0, 1, 0)
FeaturesSection.Position = UDim2.new(0, 0, 0, 0)
FeaturesSection.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
FeaturesSection.BorderSizePixel = 3
FeaturesSection.BorderColor3 = Color3.new(1, 1, 1)
FeaturesSection.Visible = false

local featuresCorner = Instance.new("UICorner")
featuresCorner.CornerRadius = UDim.new(0, 8)
featuresCorner.Parent = FeaturesSection

-- إطار التمرير لقسم المميزات - تم زيادة الطول
local FeaturesScrollFrame = Instance.new("ScrollingFrame")
FeaturesScrollFrame.Name = "FeaturesScrollFrame"
FeaturesScrollFrame.Size = UDim2.new(1, -20, 1, -20)
FeaturesScrollFrame.Position = UDim2.new(0, 10, 0, 10)
FeaturesScrollFrame.BackgroundTransparency = 1
FeaturesScrollFrame.ScrollBarThickness = 8
FeaturesScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 1200) -- زيادة الطول لاستيعاب الأزرار الجديدة

local FeaturesButtonGrid = Instance.new("UIGridLayout")
FeaturesButtonGrid.CellPadding = UDim2.new(0, 5, 0, 10)
FeaturesButtonGrid.CellSize = UDim2.new(1, -10, 0, 50)
FeaturesButtonGrid.SortOrder = Enum.SortOrder.LayoutOrder
FeaturesButtonGrid.Parent = FeaturesScrollFrame

-- إنشاء أزرار المميزات (تم حذف ESP، تسريع الانيميشن، غروب، شروق، وإيقاف الجو)
local featuresButtons = {
    {name = "اختراق الجدران", type = "noclip", order = 1},
    {name = "لوك الكاميرا", type = "cameraLock", order = 2},
    {name = "ليل", type = "night", order = 3},
    {name = "نهار", type = "day", order = 4},
    {name = "مطر", type = "rain", order = 5},
    {name = "ثلج", type = "snow", order = 6},
    {name = "ضباب", type = "fog", order = 7},
    {name = "عاصفه", type = "storm", order = 8},
    {name = "صباح", type = "morning", order = 9},
    {name = "مشمس", type = "sunny", order = 10},
    {name = "واقعيه", type = "realism", order = 11},
    
    -- الأزرار الجديدة المضافة
    {name = "مضاد الكلبشه", type = "antiGrab", order = 12},
    {name = "مضاد نسخ", type = "antiCopy", order = 13},
    {name = "مضاد نسخ بدون Mod", type = "antiCopyNoMod", order = 14},
    {name = "حقل الاوامر", type = "commandField", order = 15},
    {name = "Wa7eed", type = "wa7eedTitle", order = 16},
    {name = "2EVER", type = "2everTitle", order = 17},
    
    -- الأزرار الجديدة المضافة
    {name = "الدخول والخروج", type = "joinLeaveNotif", order = 18},
    {name = "كم فيه سيرفر", type = "serverCount", order = 19},
    {name = "اداه السلام", type = "waveTool", order = 20},
    {name = "اداه الكشاف", type = "flashlightTool", order = 21},
    {name = "لستة اللاعبين", type = "playerList", order = 22}
}

local featuresButtonInstances = {}
local featuresActive = {
    noclip = false,
    cameraLock = false,
    antiGrab = false,
    antiCopy = false,
    antiCopyNoMod = false,
    commandField = false,
    joinLeaveNotif = false,
    waveTool = false,
    flashlightTool = false,
    playerList = false
}

local function createFeaturesButton(name, layoutOrder)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Size = UDim2.new(1, -10, 0, 50)
    button.BackgroundColor3 = Color3.new(0, 0, 0)
    button.TextColor3 = Color3.new(1, 1, 1)
    button.Text = name
    button.TextSize = 14
    button.Font = Enum.Font.GothamBlack
    button.TextStrokeColor3 = Color3.new(0, 0, 0)
    button.TextStrokeTransparency = 0.3
    button.BorderSizePixel = 3
    button.BorderColor3 = Color3.new(1, 1, 1)
    button.LayoutOrder = layoutOrder
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = button
    
    -- أنيميشن الزر عند المرور
    button.MouseEnter:Connect(function()
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local tween = TweenService:Create(button, tweenInfo, {
            BackgroundColor3 = Color3.new(0.2, 0.2, 0.2)
        })
        tween:Play()
    end)
    
    button.MouseLeave:Connect(function()
        local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local tween = TweenService:Create(button, tweenInfo, {
            BackgroundColor3 = Color3.new(0, 0, 0)
        })
        tween:Play()
    end)
    
    button.Parent = FeaturesScrollFrame
    return button
end

for _, buttonInfo in ipairs(featuresButtons) do
    local button = createFeaturesButton(buttonInfo.name, buttonInfo.order)
    featuresButtonInstances[buttonInfo.type] = button
end

-- باقي الأقسام
local PlayerSection = Instance.new("Frame")
PlayerSection.Name = "PlayerSection"
PlayerSection.Size = UDim2.new(1, 0, 1, 0)
PlayerSection.Position = UDim2.new(0, 0, 0, 0)
PlayerSection.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
PlayerSection.BorderSizePixel = 3
PlayerSection.BorderColor3 = Color3.new(1, 1, 1)
PlayerSection.Visible = false

local playerCorner = Instance.new("UICorner")
playerCorner.CornerRadius = UDim.new(0, 8)
playerCorner.Parent = PlayerSection

local PlayerLabel = Instance.new("TextLabel")
PlayerLabel.Size = UDim2.new(1, -20, 1, -20)
PlayerLabel.Position = UDim2.new(0, 10, 0, 10)
PlayerLabel.BackgroundTransparency = 1
PlayerLabel.TextColor3 = Color3.new(1, 1, 1)
PlayerLabel.Text = "قسم اللاعب - قريباً"
PlayerLabel.TextSize = 18
PlayerLabel.Font = Enum.Font.GothamBlack
PlayerLabel.TextXAlignment = Enum.TextXAlignment.Center
PlayerLabel.Parent = PlayerSection

-- قسم الحقوق المحدث والمحسن بدون صور
local RightsSection = Instance.new("Frame")
RightsSection.Name = "RightsSection"
RightsSection.Size = UDim2.new(1, 0, 1, 0)
RightsSection.Position = UDim2.new(0, 0, 0, 0)
RightsSection.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
RightsSection.BorderSizePixel = 3
RightsSection.BorderColor3 = Color3.new(1, 1, 1)
RightsSection.Visible = false

local rightsCorner = Instance.new("UICorner")
rightsCorner.CornerRadius = UDim.new(0, 8)
rightsCorner.Parent = RightsSection

-- إطار التمرير لقسم الحقوق - تم زيادة الطول
local RightsScrollFrame = Instance.new("ScrollingFrame")
RightsScrollFrame.Name = "RightsScrollFrame"
RightsScrollFrame.Size = UDim2.new(1, -20, 1, -20)
RightsScrollFrame.Position = UDim2.new(0, 10, 0, 10)
RightsScrollFrame.BackgroundTransparency = 1
RightsScrollFrame.ScrollBarThickness = 8
RightsScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 800)

-- المطور الرئيسي - بدون صورة
local OwnerFrame = Instance.new("Frame")
OwnerFrame.Name = "OwnerFrame"
OwnerFrame.Size = UDim2.new(1, 0, 0, 120)
OwnerFrame.Position = UDim2.new(0, 0, 0, 20)
OwnerFrame.BackgroundTransparency = 1
OwnerFrame.Parent = RightsScrollFrame

local OwnerTitle = Instance.new("TextLabel")
OwnerTitle.Name = "OwnerTitle"
OwnerTitle.Size = UDim2.new(1, -40, 0, 40)
OwnerTitle.Position = UDim2.new(0, 20, 0, 0)
OwnerTitle.BackgroundColor3 = Color3.new(0, 0, 0)
OwnerTitle.TextColor3 = Color3.new(1, 1, 1)
OwnerTitle.Text = "OWNER"
OwnerTitle.TextSize = 24
OwnerTitle.Font = Enum.Font.GothamBlack
OwnerTitle.BorderSizePixel = 3
OwnerTitle.BorderColor3 = Color3.new(1, 1, 1)
OwnerTitle.TextXAlignment = Enum.TextXAlignment.Center

local ownerTitleCorner = Instance.new("UICorner")
ownerTitleCorner.CornerRadius = UDim.new(0, 8)
ownerTitleCorner.Parent = OwnerTitle

local OwnerInfo = Instance.new("TextLabel")
OwnerInfo.Name = "OwnerInfo"
OwnerInfo.Size = UDim2.new(1, -40, 0, 70)
OwnerInfo.Position = UDim2.new(0, 20, 0, 50)
OwnerInfo.BackgroundTransparency = 1
OwnerInfo.TextColor3 = Color3.new(1, 1, 1)
OwnerInfo.Text = "Wa7eed\n\n@sj3zx"
OwnerInfo.TextSize = 22
OwnerInfo.Font = Enum.Font.GothamBlack
OwnerInfo.TextXAlignment = Enum.TextXAlignment.Center
OwnerInfo.TextYAlignment = Enum.TextYAlignment.Center
OwnerInfo.Parent = OwnerFrame

OwnerTitle.Parent = OwnerFrame

-- مسافة
local Spacer1 = Instance.new("Frame")
Spacer1.Name = "Spacer1"
Spacer1.Size = UDim2.new(1, 0, 0, 30)
Spacer1.Position = UDim2.new(0, 0, 0, 150)
Spacer1.BackgroundTransparency = 1
Spacer1.Parent = RightsScrollFrame

-- المطور المساعد - بدون صورة
local ViceOwnerFrame = Instance.new("Frame")
ViceOwnerFrame.Name = "ViceOwnerFrame"
ViceOwnerFrame.Size = UDim2.new(1, 0, 0, 120)
ViceOwnerFrame.Position = UDim2.new(0, 0, 0, 190)
ViceOwnerFrame.BackgroundTransparency = 1
ViceOwnerFrame.Parent = RightsScrollFrame

local ViceOwnerTitle = Instance.new("TextLabel")
ViceOwnerTitle.Name = "ViceOwnerTitle"
ViceOwnerTitle.Size = UDim2.new(1, -40, 0, 40)
ViceOwnerTitle.Position = UDim2.new(0, 20, 0, 0)
ViceOwnerTitle.BackgroundColor3 = Color3.new(0, 0, 0)
ViceOwnerTitle.TextColor3 = Color3.new(1, 1, 1)
ViceOwnerTitle.Text = "VICE OWNER"
ViceOwnerTitle.TextSize = 24
ViceOwnerTitle.Font = Enum.Font.GothamBlack
ViceOwnerTitle.BorderSizePixel = 3
ViceOwnerTitle.BorderColor3 = Color3.new(1, 1, 1)
ViceOwnerTitle.TextXAlignment = Enum.TextXAlignment.Center

local viceOwnerTitleCorner = Instance.new("UICorner")
viceOwnerTitleCorner.CornerRadius = UDim.new(0, 8)
viceOwnerTitleCorner.Parent = ViceOwnerTitle

local ViceOwnerInfo = Instance.new("TextLabel")
ViceOwnerInfo.Name = "ViceOwnerInfo"
ViceOwnerInfo.Size = UDim2.new(1, -40, 0, 70)
ViceOwnerInfo.Position = UDim2.new(0, 20, 0, 50)
ViceOwnerInfo.BackgroundTransparency = 1
ViceOwnerInfo.TextColor3 = Color3.new(1, 1, 1)
ViceOwnerInfo.Text = "2EVER\n\n@2liiliil"
ViceOwnerInfo.TextSize = 22
ViceOwnerInfo.Font = Enum.Font.GothamBlack
ViceOwnerInfo.TextXAlignment = Enum.TextXAlignment.Center
ViceOwnerInfo.TextYAlignment = Enum.TextYAlignment.Center
ViceOwnerInfo.Parent = ViceOwnerFrame

ViceOwnerTitle.Parent = ViceOwnerFrame

-- مسافة
local Spacer2 = Instance.new("Frame")
Spacer2.Name = "Spacer2"
Spacer2.Size = UDim2.new(1, 0, 0, 40)
Spacer2.Position = UDim2.new(0, 0, 0, 320)
Spacer2.BackgroundTransparency = 1
Spacer2.Parent = RightsScrollFrame

-- نص الحقوق المحدث
local RightsText = Instance.new("TextLabel")
RightsText.Name = "RightsText"
RightsText.Size = UDim2.new(1, -20, 0, 80)
RightsText.Position = UDim2.new(0, 10, 0, 370)
RightsText.BackgroundTransparency = 1
RightsText.TextColor3 = Color3.new(1, 1, 1)
RightsText.Text = "هذه الحقوق محفوظه الي Wa7eed"
RightsText.TextSize = 26
RightsText.Font = Enum.Font.GothamBlack
RightsText.TextXAlignment = Enum.TextXAlignment.Center
RightsText.TextYAlignment = Enum.TextYAlignment.Center
RightsText.Parent = RightsScrollFrame

-- زر نسخ رابط الديسكورد المحدث
local DiscordButton = Instance.new("TextButton")
DiscordButton.Name = "DiscordButton"
DiscordButton.Size = UDim2.new(1, -40, 0, 60)
DiscordButton.Position = UDim2.new(0, 20, 0, 470)
DiscordButton.BackgroundColor3 = Color3.new(0, 0, 0)
DiscordButton.TextColor3 = Color3.new(1, 1, 1)
DiscordButton.Text = "انسخ سيرفرنا على الديسكورد"
DiscordButton.TextSize = 18
DiscordButton.Font = Enum.Font.GothamBlack
DiscordButton.BorderSizePixel = 3
DiscordButton.BorderColor3 = Color3.new(1, 1, 1)

local discordCorner = Instance.new("UICorner")
discordCorner.CornerRadius = UDim.new(0, 10)
discordCorner.Parent = DiscordButton

-- أنيميشن زر الديسكورد
DiscordButton.MouseEnter:Connect(function()
    local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tween = TweenService:Create(DiscordButton, tweenInfo, {
        BackgroundColor3 = Color3.new(0.2, 0.2, 0.2),
        Size = UDim2.new(1, -30, 0, 65)
    })
    tween:Play()
end)

DiscordButton.MouseLeave:Connect(function()
    local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tween = TweenService:Create(DiscordButton, tweenInfo, {
        BackgroundColor3 = Color3.new(0, 0, 0),
        Size = UDim2.new(1, -40, 0, 60)
    })
    tween:Play()
end)

DiscordButton.MouseButton1Click:Connect(function()
    -- نسخ رابط الديسكورد
    pcall(function()
        setclipboard("https://discord.gg/6T6W3GcxUX")
    end)
end)

DiscordButton.Parent = RightsScrollFrame

-- نظام الإشعارات المحسن
local NotificationGui = Instance.new("ScreenGui")
NotificationGui.Name = "Notifications"
NotificationGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
NotificationGui.ResetOnSpawn = false
NotificationGui.Parent = CoreGui

local activeNotifications = {}
local lastVictim = nil

local function showNotification(message, playerInfo, hasCloseButton)
    local notification = Instance.new("Frame")
    notification.Size = UDim2.new(0, 350, 0, 80)
    notification.Position = UDim2.new(1, -360, 0, 10 + (#activeNotifications * 90))
    notification.BackgroundColor3 = Color3.new(0, 0, 0)
    notification.BorderSizePixel = 3
    notification.BorderColor3 = Color3.new(1, 1, 1)
    notification.ZIndex = 100
    
    local notifCorner = Instance.new("UICorner")
    notifCorner.CornerRadius = UDim.new(0, 8)
    notifCorner.Parent = notification
    
    local messageLabel = Instance.new("TextLabel")
    messageLabel.Size = UDim2.new(1, -10, hasCloseButton and 0.7 or 1, hasCloseButton and -5 or 0)
    messageLabel.Position = UDim2.new(0, 5, 0, 5)
    messageLabel.BackgroundTransparency = 1
    messageLabel.TextColor3 = Color3.new(1, 1, 1)
    messageLabel.Text = message
    messageLabel.TextSize = 14
    messageLabel.Font = Enum.Font.GothamBlack
    messageLabel.TextWrapped = true
    messageLabel.Parent = notification
    
    -- زر الإغلاق يظهر فقط للإشعارات التي تحتاجه
    if hasCloseButton then
        local closeButton = Instance.new("TextButton")
        closeButton.Size = UDim2.new(0, 60, 0, 25)
        closeButton.Position = UDim2.new(0.5, -30, 0.7, 5)
        closeButton.BackgroundColor3 = Color3.new(0, 0, 0)
        closeButton.TextColor3 = Color3.new(1, 1, 1)
        closeButton.Text = "تم"
        closeButton.TextSize = 12
        closeButton.Font = Enum.Font.GothamBlack
        closeButton.BorderSizePixel = 3
        closeButton.BorderColor3 = Color3.new(1, 1, 1)
        closeButton.Parent = notification
        
        local closeCorner = Instance.new("UICorner")
        closeCorner.CornerRadius = UDim.new(0, 4)
        closeCorner.Parent = closeButton
        
        closeButton.MouseButton1Click:Connect(function()
            local index = table.find(activeNotifications, notification)
            if index then
                table.remove(activeNotifications, index)
            end
            
            local tweenOut = TweenService:Create(notification, TweenInfo.new(0.5), {Position = UDim2.new(1, 400, 0, notification.Position.Y.Offset)})
            tweenOut:Play()
            
            wait(0.5)
            notification:Destroy()
            
            for i, notif in ipairs(activeNotifications) do
                notif.Position = UDim2.new(1, -360, 0, 10 + ((i-1) * 90))
            end
        end)
    end
    
    if playerInfo then
        local playerImage = Instance.new("ImageLabel")
        playerImage.Size = UDim2.new(0, 50, 0, 50)
        playerImage.Position = UDim2.new(0, 10, 0, 15)
        playerImage.BackgroundColor3 = Color3.new(1, 1, 1)
        playerImage.BorderSizePixel = 2
        playerImage.BorderColor3 = Color3.new(1, 1, 1)
        playerImage.Image = playerInfo.Image
        playerImage.Parent = notification
        
        local imageCorner = Instance.new("UICorner")
        imageCorner.CornerRadius = UDim.new(0, 4)
        imageCorner.Parent = playerImage
        
        messageLabel.Position = UDim2.new(0, 70, 0, 5)
        messageLabel.Size = UDim2.new(1, -80, hasCloseButton and 0.7 or 1, hasCloseButton and -5 or 0)
    end
    
    notification.Parent = NotificationGui
    table.insert(activeNotifications, notification)
    
    notification.Position = UDim2.new(1, 400, 0, notification.Position.Y.Offset)
    local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
    local tween = TweenService:Create(notification, tweenInfo, {Position = UDim2.new(1, -360, 0, notification.Position.Y.Offset)})
    tween:Play()
    
    -- الإشعارات العادية تختفي بعد 5 ثواني، إشعارات الخروج تبقى
    if not hasCloseButton then
        delay(5, function()
            if notification.Parent then
                local tweenOut = TweenService:Create(notification, tweenInfo, {Position = UDim2.new(1, 400, 0, notification.Position.Y.Offset)})
                tweenOut:Play()
                
                wait(0.5)
                notification:Destroy()
                
                local index = table.find(activeNotifications, notification)
                if index then
                    table.remove(activeNotifications, index)
                end
            end
        end)
    end
end

-- تجميع العناصر
ScreenGui.Parent = CoreGui
ToggleButton.Parent = ScreenGui
MainFrame.Parent = ScreenGui
Title.Parent = MainFrame
TabsFrame.Parent = MainFrame
ContentFrame.Parent = MainFrame
VictimSection.Parent = ContentFrame
PlayerSection.Parent = ContentFrame
FeaturesSection.Parent = ContentFrame
SpamSection.Parent = ContentFrame
RightsSection.Parent = ContentFrame
VictimInfo.Parent = VictimSection
VictimAvatar.Parent = VictimInfo
VictimName.Parent = VictimInfo
VictimDetails.Parent = VictimInfo
InputFrame.Parent = VictimSection
VictimInput.Parent = InputFrame
SetVictimButton.Parent = InputFrame
ScrollFrame.Parent = VictimSection
SpamScrollFrame.Parent = SpamSection
FeaturesScrollFrame.Parent = FeaturesSection
RightsScrollFrame.Parent = RightsSection

-- المتغيرات
local currentVictim = nil
local isSpectating = false
local originalCameraSubject = workspace.CurrentCamera.CameraSubject

-- متغيرات الأزرار الجديدة
local bangActive = false
local bangFrontActive = false

local bangConnection = nil
local bangFrontConnection = nil

local bangTargetPlayer = nil
local bangFrontTargetPlayer = nil

-- متغيرات لتتبع حالة الأزرار عند خروج الضحية
local bangWasActive = false
local bangFrontWasActive = false

-- متغيرات زر بانق بالراس الجديد
local headSucking = false
local headSuckAnimTrack = nil
local headSuckConnection = nil
local headSuckTargetPlayer = nil
local headSuckCurrentDistance = 1.5
local headSuckMovingIn = true
local headSuckMovementSpeed = 0.5
local headSuckMinDistance = 0.5
local headSuckMaxDistance = 2.5

-- متغيرات المميزات الجديدة
local noclipEnabled = false
local noclipConnection = nil

-- متغيرات الأزرار التلقائية الجديدة (مصححة)
local autoButtonsActive = {}
local autoButtonsThreads = {}

-- متغيرات الأزرار الجديدة في قسم المميزات
local antiGrabActive = false
local antiGrabConnection = nil
local antiCopyActive = false
local antiCopyThread = nil
local antiCopyNoModActive = false
local antiCopyNoModThread = nil
local commandFieldActive = false
local commandFieldGui = nil
local joinLeaveNotifActive = false
local joinLeaveConnection = nil
local waveToolActive = false
local waveToolInstance = nil
local flashlightToolActive = false
local flashlightToolInstance = nil
local playerListActive = false
local playerListGui = nil

-- متغيرات زر بانق تشويش الجديد
local bangChaosActive = false
local bangChaosThread = nil

-- وظيفة البحث عن لاعب محسنة
local function findPlayerByPartialName(partialName)
    local matches = {}
    partialName = partialName:lower()
    
    for _, player in pairs(Players:GetPlayers()) do
        if player.Name:lower() == partialName then
            return player -- تطابق كامل
        elseif player.DisplayName:lower() == partialName then
            return player -- تطابق كامل للاسم المعروض
        end
    end
    
    -- إذا لم يكن هناك تطابق كامل، ابحث عن تطابق جزئي
    for _, player in pairs(Players:GetPlayers()) do
        if player.Name:lower():sub(1, #partialName) == partialName or 
           player.DisplayName:lower():sub(1, #partialName) == partialName then
            table.insert(matches, player)
        end
    end
    
    if #matches == 1 then
        return matches[1]
    elseif #matches > 1 then
        return nil -- أكثر من لاعب متطابق
    else
        return nil -- لا يوجد تطابق
    end
end

-- وظيفة تحديث معلومات الضحية
local function updateVictimInfo(victimPlayer)
    if victimPlayer then
        VictimName.Text = "الضحية: " .. victimPlayer.Name
        pcall(function()
            VictimAvatar.Image = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. victimPlayer.UserId .. "&width=150&height=150&format=png"
        end)
        
        -- تحديث المعلومات الإضافية
        DisplayNameLabel.Text = "لقب: " .. victimPlayer.DisplayName
        UserIdLabel.Text = "ID: " .. victimPlayer.UserId
        
        -- حساب تاريخ الإنشاء
        local success, result = pcall(function()
            return victimPlayer.AccountAge
        end)
        if success then
            local years = math.floor(result / 365)
            local months = math.floor((result % 365) / 30)
            local days = (result % 365) % 30
            AccountAgeLabel.Text = "تاريخ الإنشاء: " .. years .. " سنة, " .. months .. " شهر, " .. days .. " يوم"
        else
            AccountAgeLabel.Text = "تاريخ الإنشاء: غير متوفر"
        end
        
        -- الحصول على معلومات الأدوات
        local toolsText = "الأدوات: "
        if victimPlayer.Character then
            local tools = {}
            for _, item in pairs(victimPlayer.Character:GetChildren()) do
                if item:IsA("Tool") then
                    table.insert(tools, item.Name)
                end
            end
            if #tools > 0 then
                toolsText = toolsText .. table.concat(tools, ", ")
            else
                toolsText = toolsText .. "لا يوجد"
            end
        else
            toolsText = toolsText .. "غير متوفر"
        end
        ToolsLabel.Text = toolsText
        
        currentVictim = victimPlayer.Name
        lastVictim = victimPlayer.Name
    else
        VictimName.Text = "لا يوجد ضحية محددة"
        VictimAvatar.Image = "rbxasset://textures/ui/GuiImagePlaceholder.png"
        DisplayNameLabel.Text = "لقب: -"
        AccountAgeLabel.Text = "تاريخ الإنشاء: -"
        UserIdLabel.Text = "ID: -"
        ToolsLabel.Text = "الأدوات: -"
        currentVictim = nil
    end
end

-- وظيفة تنفيذ الأمر الأساسية
local function executeCommand(command)
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local HDAdminHDClient = ReplicatedStorage:FindFirstChild("HDAdminHDClient")
    
    if HDAdminHDClient then
        local Signals = HDAdminHDClient:FindFirstChild("Signals")
        if Signals then
            local RequestCommandSilent = Signals:FindFirstChild("RequestCommandSilent")
            if RequestCommandSilent then
                pcall(function()
                    RequestCommandSilent:InvokeServer(command)
                end)
            end
        end
    end
end

-- وظائف تنفيذ الأوامر المعدلة (تستخدم currentVictim بدلاً من sj3zxx)
local function executeFly220Command()
    if currentVictim then
        executeCommand(".fly " .. currentVictim .. " 220 ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeSpeed220Command()
    if currentVictim then
        executeCommand(".speed " .. currentVictim .. " 220 ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeSuspendVictimCommand()
    if currentVictim then
        executeCommand(".speed " .. currentVictim .. " 01. ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeUnsuspendVictimCommand()
    if currentVictim then
        executeCommand(".speed " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeSuspendFlyCommand()
    if currentVictim then
        executeCommand(".fly " .. currentVictim .. " 10. ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeUnsuspendFlyCommand()
    if currentVictim then
        executeCommand(".fly " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeCopy12()
    if currentVictim then
        -- الأمر الأول
        executeCommand(".wormify " .. currentVictim .. " ")
        -- الأمر الثاني بعده مباشرة
        executeCommand(".giantDwarf " .. currentVictim .. " .dog " .. currentVictim .. " .neon " .. currentVictim .. " .colour " .. currentVictim .. " P .speed " .. currentVictim .. " 01. ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

-- وظائف تنفيذ الأوامر للزر الجديدة
local function executePhaseCommand()
    if currentVictim then
        executeCommand(".phase " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeCharCommand()
    if currentVictim then
        executeCommand(".char " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeUncharCommand()
    if currentVictim then
        executeCommand(".unchar " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeUndogCommand()
    if currentVictim then
        executeCommand(".undog " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeUnneonCommand()
    if currentVictim then
        executeCommand(".unneon " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeUnwormifyCommand()
    if currentVictim then
        executeCommand(".unwormify " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeCopy10Command()
    if currentVictim then
        executeCommand(".takethel " .. currentVictim .. " .speed " .. currentVictim .. " 01. .sit " .. currentVictim .. " .size " .. currentVictim .. " 2 .pants " .. currentVictim .. " .giantDwarf " .. currentVictim .. " .fat " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeCopy11Command()
    if currentVictim then
        executeCommand(".emote " .. currentVictim .. " .size " .. currentVictim .. " 3 .thin " .. currentVictim .. " .neon " .. currentVictim .. " .colour " .. currentVictim .. " P .speed " .. currentVictim .. " 01. ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeCopy13Command()
    if currentVictim then
        executeCommand(".creepify " .. currentVictim .. " .giantDwarf " .. currentVictim .. " .dog " .. currentVictim .. " .neon " .. currentVictim .. " .colour " .. currentVictim .. " P .speed " .. currentVictim .. " 01. ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeCopy14Command()
    if currentVictim then
        executeCommand(".frogify " .. currentVictim .. " .neon " .. currentVictim .. " .colour " .. currentVictim .. " Black .fakeDeath " .. currentVictim .. " .speed " .. currentVictim .. " 01. ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeCopy15Command()
    if currentVictim then
        executeCommand(".dinofy " .. currentVictim .. " .giantDwarf " .. currentVictim .. " .dog " .. currentVictim .. " .sit " .. currentVictim .. " .speed " .. currentVictim .. " 01. .neon " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

-- وظائف تنفيذ الأوامر الأساسية
local function executeVictimCommand(command)
    if currentVictim then
        executeCommand(command .. " " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeColorCommand(color)
    if currentVictim then
        executeCommand(".colour " .. currentVictim .. " " .. color .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeFlyCommand(speed)
    if currentVictim then
        executeCommand(".fly " .. currentVictim .. " " .. speed .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeSpeedCommand(speed)
    if currentVictim then
        executeCommand(".speed " .. currentVictim .. " " .. speed .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeSizeCommand(size)
    if currentVictim then
        executeCommand(".size " .. currentVictim .. " " .. size .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeCharSkinCommand(char)
    if currentVictim then
        executeCommand(".char " .. currentVictim .. " " .. char .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

-- وظائف الأزرار الجديدة المطلوبة
local function executeWhiteCommand()
    if currentVictim then
        executeCommand(".color " .. currentVictim .. " White ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeSuspendFCommand()
    if currentVictim then
        executeCommand(".speed " .. currentVictim .. " 01. .jp " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeUnsuspendFCommand()
    if currentVictim then
        executeCommand(".speed " .. currentVictim .. "  .unjp " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeSuspendJumpCommand()
    if currentVictim then
        executeCommand(".jp  " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeUnsuspendJumpCommand()
    if currentVictim then
        executeCommand(".unjp  " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeFlyInAirCommand()
    if currentVictim then
        executeCommand(".jp " .. currentVictim .. " 999999999999999999999999999999 .jump " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeViewCommand()
    if currentVictim then
        executeCommand(".view  " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeUnviewCommand()
    if currentVictim then
        executeCommand(".unview  " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeStopAllCommand()
    if currentVictim then
        executeCommand(".unwormify " .. currentVictim .. "  .undog " .. currentVictim .. "  .unneon " .. currentVictim .. "  .unchar " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeCopy16Command()
    if currentVictim then
        executeCommand(".speed " .. currentVictim .. " 01. .jp " .. currentVictim .. " .emote " .. currentVictim .. " .giantDwarf " .. currentVictim .. " .neon " .. currentVictim .. " .colour " .. currentVictim .. " P ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeCopy17Command()
    if currentVictim then
        executeCommand(".speed " .. currentVictim .. " 01. .jp " .. currentVictim .. " .worm " .. currentVictim .. " .giantDwarf " .. currentVictim .. "  .neon " .. currentVictim .. "  .colour " .. currentVictim .. " B ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeCopy18Command()
    if currentVictim then
        executeCommand(".speed " .. currentVictim .. " 01. .jp " .. currentVictim .. "  .spongify " .. currentVictim .. " .emote " .. currentVictim .. " .sit " .. currentVictim .. " .size " .. currentVictim .. " 3 ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeCopy19Command()
    if currentVictim then
        executeCommand(".speed " .. currentVictim .. " 01. .jp " .. currentVictim .. "  .car " .. currentVictim .. " .giantDwarf " .. currentVictim .. "  .sit " .. currentVictim .. "  .colour " .. currentVictim .. " pink ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeCopy20Command()
    if currentVictim then
        executeCommand(".speed " .. currentVictim .. " 01. .jp " .. currentVictim .. " .worm " .. currentVictim .. " .thin " .. currentVictim .. " .neon " .. currentVictim .. " .colour " .. currentVictim .. " pink ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

local function executeCrippleCommand()
    if currentVictim then
        executeCommand(".sit  " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end

-- وظائف الأزرار التلقائية الجديدة المعدلة الأوقات
local function toggleAutoButton(buttonType, commandFunction, interval)
    if autoButtonsActive[buttonType] then
        -- إيقاف الزر التلقائي
        autoButtonsActive[buttonType] = false
        if autoButtonsThreads[buttonType] then
            autoButtonsThreads[buttonType] = nil
        end
        
        buttonInstances[buttonType].Text = string.gsub(buttonInstances[buttonType].Text, " ✅", "")
        buttonInstances[buttonType].BackgroundColor3 = Color3.new(0, 0, 0)
    else
        -- تشغيل الزر التلقائي
        autoButtonsActive[buttonType] = true
        buttonInstances[buttonType].Text = buttonInstances[buttonType].Text .. " ✅"
        buttonInstances[buttonType].BackgroundColor3 = Color3.new(0, 0.5, 0)
        
        -- بدء التنفيذ التلقائي (مصحح تماماً)
        autoButtonsThreads[buttonType] = coroutine.wrap(function()
            while autoButtonsActive[buttonType] and currentVictim do
                commandFunction()
                wait(interval) -- الوقت الحقيقي المطلوب
            end
        end)()
    end
end

-- وظيفة المشاهدة (تفعيل/إلغاء) - معدلة
local function toggleSpectate()
    if currentVictim and not isSpectating then
        local victimPlayer = findPlayerByPartialName(currentVictim)
        if victimPlayer and victimPlayer.Character then
            originalCameraSubject = workspace.CurrentCamera.CameraSubject
            workspace.CurrentCamera.CameraSubject = victimPlayer.Character:FindFirstChild("Humanoid")
            isSpectating = true
            buttonInstances["spectate"].Text = "إلغاء المشاهدة"
        end
    else
        workspace.CurrentCamera.CameraSubject = originalCameraSubject
        isSpectating = false
        buttonInstances["spectate"].Text = "مشاهدة"
    end
end

-- وظيفة الانتقال
local function teleportToPlayer()
    if currentVictim then
        local victimPlayer = findPlayerByPartialName(currentVictim)
        if victimPlayer and victimPlayer.Character then
            local humanoid = victimPlayer.Character:FindFirstChild("Humanoid")
            local rootPart = victimPlayer.Character:FindFirstChild("HumanoidRootPart")
            
            if humanoid and rootPart then
                local localChar = player.Character
                if localChar then
                    local localRoot = localChar:FindFirstChild("HumanoidRootPart")
                    if localRoot then
                        localRoot.CFrame = rootPart.CFrame + Vector3.new(0, 3, 0)
                    end
                end
            end
        end
    end
end

-- وظائف الأزرار الجديدة المعدلة
-- زر بانق
local function playBangAnimation()
    local character = player.Character
    if not character then return nil end
    
    local humanoid = character:FindFirstChild("Humanoid")
    if not humanoid then return nil end

    -- إيقاف كل الأنميشنات القديمة
    for _, track in pairs(humanoid:GetPlayingAnimationTracks()) do
        track:Stop()
    end

    local animation = Instance.new("Animation")
    animation.AnimationId = "rbxassetid://10714068222"
    local animTrack = humanoid:LoadAnimation(animation)
    animTrack.Looped = true
    animTrack:Play()
    animTrack:AdjustSpeed(2000)
    return animTrack
end

local function startBang()
    if not currentVictim then
        return
    end
    
    local targetPlayer = findPlayerByPartialName(currentVictim)
    if not targetPlayer then
        return
    end
    
    bangActive = true
    bangTargetPlayer = targetPlayer
    
    local currentAnimTrack = playBangAnimation()
    
    bangConnection = RunService.Heartbeat:Connect(function()
        if bangActive and bangTargetPlayer and bangTargetPlayer.Character then
            local targetHRP = bangTargetPlayer.Character:FindFirstChild("HumanoidRootPart")
            local playerHRP = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
            if targetHRP and playerHRP then
                local distance = 1
                playerHRP.CFrame = CFrame.new(targetHRP.Position + targetHRP.CFrame.LookVector * -distance, targetHRP.Position)
            end
            
            -- إعادة الأنميشن إذا فقدناها
            if not currentAnimTrack or not currentAnimTrack.IsPlaying then
                currentAnimTrack = playBangAnimation()
            end
        end
    end)
    
    buttonInstances["bang"].Text = "بانق ✅"
    buttonInstances["bang"].BackgroundColor3 = Color3.new(0, 0.5, 0)
end

local function stopBang()
    bangActive = false
    bangTargetPlayer = nil
    
    if bangConnection then
        bangConnection:Disconnect()
        bangConnection = nil
    end

    local humanoid = player.Character and player.Character:FindFirstChild("Humanoid")
    if humanoid then
        for _, track in pairs(humanoid:GetPlayingAnimationTracks()) do
            track:Stop()
        end
    end
    
    buttonInstances["bang"].Text = "بانق"
    buttonInstances["bang"].BackgroundColor3 = Color3.new(0, 0, 0)
end

local function toggleBang()
    if bangActive then
        stopBang()
    else
        startBang()
    end
end

-- زر بانق من الامام
local bangFrontFollowing = false
local bangFrontCurrentAnimTrack = nil

local function playBangFrontAnimation()
    local character = player.Character
    if not character then return nil end
    
    local humanoid = character:FindFirstChild("Humanoid")
    if not humanoid then return nil end
    
    for _, track in pairs(humanoid:GetPlayingAnimationTracks()) do
        track:Stop()
    end
    
    local animation = Instance.new("Animation")
    animation.AnimationId = "rbxassetid://10714068222"
    local ok, animTrack = pcall(function()
        return humanoid:LoadAnimation(animation)
    end)
    
    if not ok or not animTrack then
        return nil
    end
    
    animTrack.Looped = true
    animTrack:Play()
    pcall(function() animTrack:AdjustSpeed(2000) end)
    return animTrack
end

local function applyBangFrontFollowStep(targetHRP, playerHRP)
    local forward = targetHRP.CFrame.LookVector
    local newPos = targetHRP.Position + forward * 1
    playerHRP.CFrame = CFrame.new(newPos, targetHRP.Position)
end

local function startBangFront()
    if not currentVictim then
        return
    end
    
    local targetPlayer = findPlayerByPartialName(currentVictim)
    if not targetPlayer then
        return
    end
    
    bangFrontTargetPlayer = targetPlayer
    bangFrontFollowing = true
    
    local currentAnimTrack = playBangFrontAnimation()
    bangFrontCurrentAnimTrack = currentAnimTrack

    if bangFrontConnection then
        bangFrontConnection:Disconnect()
        bangFrontConnection = nil
    end

    bangFrontConnection = RunService.Heartbeat:Connect(function()
        if bangFrontFollowing and bangFrontTargetPlayer and bangFrontTargetPlayer.Character then
            local targetHRP = bangFrontTargetPlayer.Character:FindFirstChild("HumanoidRootPart")
            local playerHRP = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
            if targetHRP and playerHRP then
                applyBangFrontFollowStep(targetHRP, playerHRP)
            end
            
            -- إعادة الأنميشن إذا فقدناها
            if not currentAnimTrack or not currentAnimTrack.IsPlaying then
                currentAnimTrack = playBangFrontAnimation()
                bangFrontCurrentAnimTrack = currentAnimTrack
            end
        end
    end)
    
    buttonInstances["bangFront"].Text = "بانق من الامام ✅"
    buttonInstances["bangFront"].BackgroundColor3 = Color3.new(0, 0.5, 0)
end

local function stopBangFront()
    bangFrontFollowing = false
    bangFrontTargetPlayer = nil
    
    if bangFrontConnection then
        bangFrontConnection:Disconnect()
        bangFrontConnection = nil
    end
    
    if bangFrontCurrentAnimTrack then
        bangFrontCurrentAnimTrack:Stop()
        bangFrontCurrentAnimTrack = nil
    end
    
    buttonInstances["bangFront"].Text = "بانق من الامام"
    buttonInstances["bangFront"].BackgroundColor3 = Color3.new(0, 0, 0)
end

local function toggleBangFront()
    if bangFrontFollowing then
        stopBangFront()
    else
        startBangFront()
    end
end

-- وظيفة زر بانق بالراس الجديد
local function updateHeadSuck()
    while headSucking do
        local localChar = game.Players.LocalPlayer.Character
        if not localChar then
            game:GetService("RunService").Heartbeat:Wait()
            continue
        end

        local humanoid = localChar:FindFirstChildOfClass("Humanoid")
        if humanoid and headSucking then
            humanoid.Sit = true
            if not headSuckAnimTrack then
                local animation = Instance.new("Animation")
                animation.AnimationId = "rbxassetid://2506281703"
                headSuckAnimTrack = humanoid:LoadAnimation(animation)
                headSuckAnimTrack:Play()
                headSuckAnimTrack:AdjustSpeed(1.5)
            end
        end

        if headSuckTargetPlayer and headSuckTargetPlayer.Character then
            local humanoidRootPart = localChar:FindFirstChild("HumanoidRootPart")
            local targetHead = headSuckTargetPlayer.Character:FindFirstChild("Head")
            if humanoidRootPart and targetHead then
                if headSuckMovingIn then
                    headSuckCurrentDistance = headSuckCurrentDistance - headSuckMovementSpeed
                    if headSuckCurrentDistance <= headSuckMinDistance then 
                        headSuckMovingIn = false 
                    end
                else
                    headSuckCurrentDistance = headSuckCurrentDistance + headSuckMovementSpeed
                    if headSuckCurrentDistance >= headSuckMaxDistance then 
                        headSuckMovingIn = true 
                    end
                end
                local faceDirection = targetHead.CFrame.LookVector
                local targetPosition = targetHead.Position + (faceDirection * headSuckCurrentDistance)
                targetPosition = Vector3.new(targetPosition.X, targetHead.Position.Y, targetPosition.Z)
                humanoidRootPart.CFrame = CFrame.new(targetPosition, targetHead.Position)
                humanoidRootPart.Velocity = Vector3.new(0, 2, 0)
            end
        end

        game:GetService("RunService").Heartbeat:Wait()
    end

    local localChar = game.Players.LocalPlayer.Character
    if localChar then
        local humanoid = localChar:FindFirstChildOfClass("Humanoid")
        if humanoid then 
            humanoid.Sit = false 
        end
    end
    if headSuckAnimTrack then 
        headSuckAnimTrack:Stop() 
        headSuckAnimTrack = nil 
    end
end

local function startHeadSuck(target)
    headSuckTargetPlayer = target
    headSucking = true
    spawn(updateHeadSuck)
    
    buttonInstances["headSuck"].Text = "بانق بالراس ✅"
    buttonInstances["headSuck"].BackgroundColor3 = Color3.new(0, 0.5, 0)
end

local function stopHeadSuck()
    headSucking = false
    headSuckTargetPlayer = nil
    
    buttonInstances["headSuck"].Text = "بانق بالراس"
    buttonInstances["headSuck"].BackgroundColor3 = Color3.new(0, 0, 0)
end

local function toggleHeadSuck()
    if headSucking then
        stopHeadSuck()
    else
        if currentVictim then
            local targetPlayer = findPlayerByPartialName(currentVictim)
            if targetPlayer then
                startHeadSuck(targetPlayer)
            end
        end
    end
end

-- إعادة التفعيل التلقائي عند عودة الضحية
local function restartActiveEffects()
    if bangWasActive and currentVictim then
        startBang()
    end
    
    if bangFrontWasActive and currentVictim then
        startBangFront()
    end
    
    if headSucking and currentVictim then
        local targetPlayer = findPlayerByPartialName(currentVictim)
        if targetPlayer then
            startHeadSuck(targetPlayer)
        end
    end
    
    -- إعادة تفعيل الأزرار التلقائية
    for buttonType, isActive in pairs(autoButtonsActive) do
        if isActive and currentVictim then
            -- إعادة تشغيل الأزرار التلقائية
            if buttonInstances[buttonType] then
                buttonInstances[buttonType].Text = buttonInstances[buttonType].Text .. " ✅"
                buttonInstances[buttonType].BackgroundColor3 = Color3.new(0, 0.5, 0)
                
                -- إعادة تشغيل الدالة التلقائية
                local commandFunction = nil
                local interval = 2 -- افتراضي
                
                -- تحديد الدالة والوقت المناسب لكل زر
                if buttonType == "autoSuspendF" then
                    commandFunction = executeSuspendFCommand
                    interval = 2
                elseif buttonType == "autoReset" then
                    commandFunction = function() executeVictimCommand(".re") end
                    interval = 2
                elseif buttonType == "autoFlyInAir" then
                    commandFunction = executeFlyInAirCommand
                    interval = 3
                elseif buttonType == "autoJump" then
                    commandFunction = function() executeVictimCommand(".jump") end
                    interval = 2
                elseif buttonType == "autoStopAll" then
                    commandFunction = executeStopAllCommand
                    interval = 5
                elseif buttonType == "autoCripple" then
                    commandFunction = executeCrippleCommand
                    interval = 2
                elseif buttonType == "autoSuspendFly" then
                    commandFunction = function() 
                        if currentVictim then
                            executeCommand(".fly " .. currentVictim .. " 10. ")
                        end
                    end
                    interval = 2
                elseif buttonType == "autoDog" then
                    commandFunction = function() executeVictimCommand(".dog") end
                    interval = 2
                end
                
                if commandFunction then
                    autoButtonsThreads[buttonType] = coroutine.wrap(function()
                        while autoButtonsActive[buttonType] and currentVictim do
                            commandFunction()
                            wait(interval)
                        end
                    end)()
                end
            end
        end
    end
end

-- إعادة الأنميشن عند الرسبون
player.CharacterAdded:Connect(function()
    wait(1) -- انتظار تحميل الشخصية
    
    if bangActive then
        playBangAnimation()
    end
    
    if bangFrontFollowing then
        playBangFrontAnimation()
    end
    
    if headSucking then
        local animation = Instance.new("Animation")
        animation.AnimationId = "rbxassetid://2506281703"
        headSuckAnimTrack = player.Character:FindFirstChildOfClass("Humanoid"):LoadAnimation(animation)
        headSuckAnimTrack:Play()
        headSuckAnimTrack:AdjustSpeed(1.5)
    end
end)

-- وظائف السبام الجديدة المعدلة
local function sendSpam1()
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local Events = ReplicatedStorage:FindFirstChild("Events")
    if Events then
        local SendMessage = Events:FindFirstChild("SendMessage")
        if SendMessage then
            pcall(function()
                SendMessage:FireServer("????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????")
            end)
        end
    end
end

local function sendSpam2()
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local Events = ReplicatedStorage:FindFirstChild("Events")
    if Events then
        local SendMessage = Events:FindFirstChild("SendMessage")
        if SendMessage then
            pcall(function()
                SendMessage:FireServer("FFFFFFFFFFFFFFFFFFFFFFFFFFFF FFFFFFFFFFFFFFFFFFFFFFFFFFFF FFFFFFFFFFFFFFFFFFFFFFFFFFFF FFFFFFFFFFFFFFFFFFFFFFFFFFFF FFFFFFFFFFFFFFFFFFFFFFFFFFFF FFFFFFFFFFFFFFFFFFFFFFFFFFFF FFFFFFFFFFFFFFFFFFFFFFFFFF")
            end)
        end
    end
end

-- وظائف السبام الجديدة المضافة
local function sendSpam3()
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local RequestCommandSilent = ReplicatedStorage.HDAdminHDClient.Signals.RequestCommandSilent
    if RequestCommandSilent then
        pcall(function()
            RequestCommandSilent:InvokeServer(".re .hr ")
        end)
    end
end

local function sendSpam4()
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local SendMessage = ReplicatedStorage.Events.SendMessage
    if SendMessage then
        pcall(function()
            SendMessage:FireServer("\216\185\217\133\217\131\217\131\217\131\217\131\217\131\217\131\217\131 \217\131\216\167\216\179\216\177\217\131 \217\138\217\136\217\132\216\175 j\216\168\216\168\216\168\216\168 \216\167\217\133\217\131 \217\133\216\178\216\185\217\143\217\136\217\190\217\135 \217\138\216\167 \218\168\217\136//\216\167\216\175  \216\167\217\133\217\131 \217\133\217\134 \216\173\217\132\216\167\217\132 j\216\168\216\168\216\168\216\168\216\168  \216\167\217\134\216\167 \216\167\217\132\217\132\217\138 \216\172\216\167\217\138\216\168\217\131 \217\133\217\134 \216\167\217\133\217\131 \216\170\216\172\216\173\216\175\217\134\217\138 \217\138\216\167 \217\136\217\132\216\175  j\216\168\216\168 \218\175\216\179/ \216\167\217\133\217\131 \216\167\217\134\216\170 \217\136 \216\167\217\133\217\131 \216\167\217\132\216\178\216\167\217\134\217\138\217\135 \216\185\217\133\217\131\217\131\217\131\217\131\217\131\217\131\217\131 \217\131\216\167\216\179\216\177\217\131 \217\138\217\136\217\132\216\175 j\216\168\216\168\216\168\216\168 \216\167\217\133\217\131 \217\133\216\178\216\185\217\143\217\136\217\190\217\135 \217\138\216\167 \218\168\217\136//\216\167\216\175  \216\167\217\133\217\131 \217\133\217\134 \216\173\217\132\216\167\217\132 j\216\168\216\168\216\168\216\168\216\168  \216\167\217\134\216\167 \216\167\217\132\217\132\217\138 \216\172\216\167\217\138\216\168\217\131 \217\133\217\134 \216\167\217\133\217\131 \216\170\216\172\216\173\216\175\217\134\217\138 \217\138\216\167 \217\136\217\132\216\175  j\216\168\216\168")
        end)
    end
end

local function sendSpam5()
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local SendMessage = ReplicatedStorage.Events.SendMessage
    if SendMessage then
        pcall(function()
            SendMessage:FireServer("ههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههه_هههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههههه")
        end)
    end
end

-- وظائف السبام التلقائي الجديدة (محدثة وسريعة جداً)
local function toggleAutoSpam(spamType, spamFunction)
    if autoSpamActive[spamType] then
        -- إيقاف السبام التلقائي
        autoSpamActive[spamType] = false
        if autoSpamThreads[spamType] then
            autoSpamThreads[spamType] = nil
        end
        
        spamButtonInstances[spamType].Text = string.gsub(spamButtonInstances[spamType].Text, " ✅", "")
        spamButtonInstances[spamType].BackgroundColor3 = Color3.new(0, 0, 0)
    else
        -- تشغيل السبام التلقائي
        autoSpamActive[spamType] = true
        spamButtonInstances[spamType].Text = spamButtonInstances[spamType].Text .. " ✅"
        spamButtonInstances[spamType].BackgroundColor3 = Color3.new(0, 0.5, 0)
        
        -- بدء السبام التلقائي (سريع جداً)
        autoSpamThreads[spamType] = coroutine.wrap(function()
            while autoSpamActive[spamType] do
                spamFunction()
                wait(0.01) -- وقت سريع جداً للسبام (0.01 ثانية)
            end
        end)()
    end
end

-- وظائف المميزات الجديدة
-- اختراق الجدران
local function toggleNoclip()
    noclipEnabled = not noclipEnabled
    
    if noclipEnabled then
        featuresButtonInstances["noclip"].Text = "اختراق الجدران ✅"
        featuresButtonInstances["noclip"].BackgroundColor3 = Color3.new(0, 0.5, 0)
        
        noclipConnection = RunService.Stepped:Connect(function()
            if noclipEnabled and player.Character then
                for _, part in pairs(player.Character:GetDescendants()) do
                    if part:IsA("BasePart") and part.CanCollide then
                        part.CanCollide = false
                    end
                end
            end
        end)
    else
        if noclipConnection then
            noclipConnection:Disconnect()
            noclipConnection = nil
        end
        
        featuresButtonInstances["noclip"].Text = "اختراق الجدران"
        featuresButtonInstances["noclip"].BackgroundColor3 = Color3.new(0, 0, 0)
    end
end

-- لوك الكاميرا الجديد (زر واحد)
local function executeCameraLock()
    -- إزالة أي لوك كاميرا سابق
    local existingGui = CoreGui:FindFirstChild("ShiftLockUI")
    if existingGui then
        existingGui:Destroy()
    end
    
    -- تنفيذ الكود الجديد للوك كاميرا
    loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
end

-- وظائف الأجواء
local function setNight()
    Lighting.ClockTime = 0
    Lighting.Brightness = 0.1
    Lighting.FogEnd = 500
    Lighting.FogColor = Color3.new(0.1, 0.1, 0.2)
    Lighting.Ambient = Color3.new(0.1, 0.1, 0.3)
    Lighting.OutdoorAmbient = Color3.new(0.1, 0.1, 0.2)
end

local function setDay()
    Lighting.ClockTime = 14
    Lighting.Brightness = 2
    Lighting.FogEnd = 100000
    Lighting.FogColor = Color3.new(0.9, 0.9, 1)
    Lighting.Ambient = Color3.new(0.5, 0.5, 0.5)
    Lighting.OutdoorAmbient = Color3.new(0.5, 0.5, 0.5)
end

local function setRain()
    -- إنشاء مطر
    local rain = Instance.new("Part")
    rain.Name = "RainEffect"
    rain.Size = Vector3.new(1000, 1000, 1000)
    rain.Position = Vector3.new(0, 500, 0)
    rain.Transparency = 1
    rain.Anchored = true
    rain.CanCollide = false
    rain.Parent = Workspace
    
    -- تأثير المطر
    local attachment = Instance.new("Attachment")
    attachment.Parent = rain
    
    local particles = Instance.new("ParticleEmitter")
    particles.Texture = "rbxasset://textures/particles/rain.dds"
    particles.Lifetime = NumberRange.new(2, 4)
    particles.Rate = 500
    particles.SpreadAngle = Vector2.new(90, 90)
    particles.Speed = NumberRange.new(20, 30)
    particles.VelocitySpread = 90
    particles.Rotation = NumberRange.new(0, 360)
    particles.RotSpeed = NumberRange.new(-30, 30)
    particles.Parent = attachment
    
    -- تغيير الإضاءة للمطر
    Lighting.ClockTime = 18
    Lighting.Brightness = 0.5
    Lighting.FogEnd = 300
    Lighting.FogColor = Color3.new(0.3, 0.3, 0.4)
end

local function setSnow()
    -- إنشاء ثلج
    local snow = Instance.new("Part")
    snow.Name = "SnowEffect"
    snow.Size = Vector3.new(1000, 1000, 1000)
    snow.Position = Vector3.new(0, 500, 0)
    snow.Transparency = 1
    snow.Anchored = true
    snow.CanCollide = false
    snow.Parent = Workspace
    
    -- تأثير الثلج
    local attachment = Instance.new("Attachment")
    attachment.Parent = snow
    
    local particles = Instance.new("ParticleEmitter")
    particles.Texture = "rbxasset://textures/particles/snow.dds"
    particles.Lifetime = NumberRange.new(5, 10)
    particles.Rate = 200
    particles.SpreadAngle = Vector2.new(180, 180)
    particles.Speed = NumberRange.new(5, 15)
    particles.VelocitySpread = 90
    particles.Rotation = NumberRange.new(0, 360)
    particles.RotSpeed = NumberRange.new(-10, 10)
    particles.Parent = attachment
    
    -- تغيير الإضاءة للثلج
    Lighting.ClockTime = 12
    Lighting.Brightness = 1.5
    Lighting.FogEnd = 500
    Lighting.FogColor = Color3.new(0.9, 0.9, 1)
    Lighting.Ambient = Color3.new(0.7, 0.7, 0.8)
end

local function setFog()
    Lighting.FogEnd = 100
    Lighting.FogStart = 0
    Lighting.FogColor = Color3.new(0.7, 0.7, 0.7)
    Lighting.Brightness = 0.7
    Lighting.ClockTime = 10
end

local function setStorm()
    -- عاصفة مع مطر ورياح
    local storm = Instance.new("Part")
    storm.Name = "StormEffect"
    storm.Size = Vector3.new(1000, 1000, 1000)
    storm.Position = Vector3.new(0, 500, 0)
    storm.Transparency = 1
    storm.Anchored = true
    storm.CanCollide = false
    storm.Parent = Workspace
    
    -- مطر العاصفة
    local attachment = Instance.new("Attachment")
    attachment.Parent = storm
    
    local particles = Instance.new("ParticleEmitter")
    particles.Texture = "rbxasset://textures/particles/rain.dds"
    particles.Lifetime = NumberRange.new(1, 2)
    particles.Rate = 800
    particles.SpreadAngle = Vector2.new(120, 120)
    particles.Speed = NumberRange.new(30, 50)
    particles.VelocitySpread = 120
    particles.Parent = attachment
    
    -- إضاءة العاصفة
    Lighting.ClockTime = 20
    Lighting.Brightness = 0.2
    Lighting.FogEnd = 200
    Lighting.FogColor = Color3.new(0.1, 0.1, 0.1)
    Lighting.Ambient = Color3.new(0.1, 0.1, 0.2)
    
    -- برق (تأثير ضوئي)
    local lightning = Instance.new("SurfaceLight")
    lightning.Brightness = 10
    lightning.Range = 50
    lightning.Color = Color3.new(1, 1, 0.8)
    lightning.Parent = storm
end

local function setMorning()
    Lighting.ClockTime = 6
    Lighting.Brightness = 1
    Lighting.FogEnd = 1000
    Lighting.FogColor = Color3.new(0.9, 0.8, 0.7)
    Lighting.Ambient = Color3.new(0.8, 0.7, 0.6)
    Lighting.OutdoorAmbient = Color3.new(0.8, 0.7, 0.6)
end

local function setSunny()
    Lighting.ClockTime = 12
    Lighting.Brightness = 3
    Lighting.FogEnd = 100000
    Lighting.FogColor = Color3.new(1, 1, 1)
    Lighting.Ambient = Color3.new(1, 1, 1)
    Lighting.OutdoorAmbient = Color3.new(1, 1, 1)
end

local function setRealism()
    -- إعدادات واقعية عالية الجودة
    Lighting.GlobalShadows = true
    Lighting.ShadowSoftness = 0.5
    Lighting.Brightness = 2
    Lighting.OutdoorAmbient = Color3.new(0.5, 0.5, 0.5)
    Lighting.Ambient = Color3.new(0.3, 0.3, 0.3)
    Lighting.FogEnd = 10000
    Lighting.ClockTime = 14
end

-- وظائف الأزرار الجديدة في قسم المميزات

-- مضاد الكلبشه المحسن
local function toggleAntiGrab()
    antiGrabActive = not antiGrabActive
    
    if antiGrabActive then
        featuresButtonInstances["antiGrab"].Text = "مضاد الكلبشه ✅"
        featuresButtonInstances["antiGrab"].BackgroundColor3 = Color3.new(0, 0.5, 0)
        
        -- مضاد قوي للكلبشه
        antiGrabConnection = RunService.Heartbeat:Connect(function()
            if player.Character then
                local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
                local rootPart = player.Character:FindFirstChild("HumanoidRootPart")
                
                if humanoid and rootPart then
                    -- منع الكلبشه عن طريق جعل الشخصية غير قابلة للإمساك
                    humanoid.PlatformStand = false
                    
                    -- إضافة قوة مضادة للكلبشه
                    for _, part in pairs(player.Character:GetDescendants()) do
                        if part:IsA("BasePart") then
                            part.CanCollide = true
                            part.Massless = false
                            
                            -- إضافة قوة مضادة عند محاولة الكلبشه
                            if part.Velocity.Magnitude > 50 then
                                part.Velocity = part.Velocity * 0.1
                            end
                            
                            -- منع التلاعب بالموقع
                            if (part.Position - rootPart.Position).Magnitude > 10 then
                                part.CFrame = rootPart.CFrame
                            end
                        end
                    end
                    
                    -- منع تأثيرات الجاذبية الخارجية
                    humanoid:ChangeState(Enum.HumanoidStateType.Running)
                end
            end
        end)
    else
        if antiGrabConnection then
            antiGrabConnection:Disconnect()
            antiGrabConnection = nil
        end
        
        featuresButtonInstances["antiGrab"].Text = "مضاد الكلبشه"
        featuresButtonInstances["antiGrab"].BackgroundColor3 = Color3.new(0, 0, 0)
    end
end

-- مضاد نسخ
local function toggleAntiCopy()
    antiCopyActive = not antiCopyActive
    
    if antiCopyActive then
        featuresButtonInstances["antiCopy"].Text = "مضاد نسخ ✅"
        featuresButtonInstances["antiCopy"].BackgroundColor3 = Color3.new(0, 0.5, 0)
        
        antiCopyThread = coroutine.wrap(function()
            while antiCopyActive do
                pcall(function()
                    local ReplicatedStorage = game:GetService("ReplicatedStorage")
                    local RequestCommandSilent = ReplicatedStorage.HDAdminHDClient.Signals.RequestCommandSilent
                    RequestCommandSilent:InvokeServer(".unwormify me  .undog me  .unneon me  .unchar me ")
                end)
                wait(5) -- كل 5 ثواني
            end
        end)()
    else
        if antiCopyThread then
            antiCopyThread = nil
        end
        
        featuresButtonInstances["antiCopy"].Text = "مضاد نسخ"
        featuresButtonInstances["antiCopy"].BackgroundColor3 = Color3.new(0, 0, 0)
    end
end

-- مضاد نسخ بدون Mod
local function toggleAntiCopyNoMod()
    antiCopyNoModActive = not antiCopyNoModActive
    
    if antiCopyNoModActive then
        featuresButtonInstances["antiCopyNoMod"].Text = "مضاد نسخ بدون Mod ✅"
        featuresButtonInstances["antiCopyNoMod"].BackgroundColor3 = Color3.new(0, 0.5, 0)
        
        antiCopyNoModThread = coroutine.wrap(function()
            while antiCopyNoModActive do
                pcall(function()
                    local ReplicatedStorage = game:GetService("ReplicatedStorage")
                    local RequestCommandSilent = ReplicatedStorage.HDAdminHDClient.Signals.RequestCommandSilent
                    RequestCommandSilent:InvokeServer(".char ")
                end)
                wait(2) -- كل 2 ثانية
            end
        end)()
    else
        if antiCopyNoModThread then
            antiCopyNoModThread = nil
        end
        
        featuresButtonInstances["antiCopyNoMod"].Text = "مضاد نسخ بدون Mod"
        featuresButtonInstances["antiCopyNoMod"].BackgroundColor3 = Color3.new(0, 0, 0)
    end
end

-- حقل الاوامر المحسن
local function toggleCommandField()
    commandFieldActive = not commandFieldActive
    
    if commandFieldActive then
        featuresButtonInstances["commandField"].Text = "حقل الاوامر ✅"
        featuresButtonInstances["commandField"].BackgroundColor3 = Color3.new(0, 0.5, 0)
        
        -- إنشاء واجهة حقل الأوامر المحسنة
        commandFieldGui = Instance.new("ScreenGui")
        commandFieldGui.Name = "CommandFieldGui"
        commandFieldGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
        commandFieldGui.ResetOnSpawn = false
        
        local mainFrame = Instance.new("Frame")
        mainFrame.Size = UDim2.new(0, 350, 0, 250) -- تصغير الحجم
        mainFrame.Position = UDim2.new(0.5, -175, 0.5, -125)
        mainFrame.BackgroundColor3 = Color3.new(0, 0, 0)
        mainFrame.BorderSizePixel = 3
        mainFrame.BorderColor3 = Color3.new(1, 1, 1)
        mainFrame.Active = true
        mainFrame.Draggable = true
        
        local corner = Instance.new("UICorner")
        corner.CornerRadius = UDim.new(0, 8)
        corner.Parent = mainFrame
        
        local title = Instance.new("TextLabel")
        title.Size = UDim2.new(1, 0, 0, 40)
        title.Position = UDim2.new(0, 0, 0, 0)
        title.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
        title.TextColor3 = Color3.new(1, 1, 1)
        title.Text = "حقل الأوامر - Wa7eed"
        title.TextSize = 18
        title.Font = Enum.Font.GothamBlack
        title.BorderSizePixel = 3
        title.BorderColor3 = Color3.new(1, 1, 1)
        title.TextXAlignment = Enum.TextXAlignment.Center
        
        local titleCorner = Instance.new("UICorner")
        titleCorner.CornerRadius = UDim.new(0, 6)
        titleCorner.Parent = title
        
        local inputField = Instance.new("TextBox")
        inputField.Size = UDim2.new(0.9, 0, 0, 40)
        inputField.Position = UDim2.new(0.05, 0, 0, 60)
        inputField.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
        inputField.TextColor3 = Color3.new(1, 1, 1)
        inputField.PlaceholderText = "أدخل الأمر هنا..."
        inputField.PlaceholderColor3 = Color3.new(0.7, 0.7, 0.7)
        inputField.Text = ""
        inputField.TextSize = 14
        inputField.Font = Enum.Font.GothamBold
        inputField.BorderSizePixel = 3
        inputField.BorderColor3 = Color3.new(1, 1, 1)
        
        local inputCorner = Instance.new("UICorner")
        inputCorner.CornerRadius = UDim.new(0, 6)
        inputCorner.Parent = inputField
        
        -- حفظ النص عند النقر خارج الحقل
        inputField.FocusLost:Connect(function()
            -- لا تفعل شيء - يحفظ النص تلقائياً
        end)
        
        -- أزرار التنفيذ
        local buttonsFrame = Instance.new("Frame")
        buttonsFrame.Size = UDim2.new(0.9, 0, 0, 130)
        buttonsFrame.Position = UDim2.new(0.05, 0, 0, 120)
        buttonsFrame.BackgroundTransparency = 1
        
        local buttonsGrid = Instance.new("UIGridLayout")
        buttonsGrid.CellPadding = UDim2.new(0, 5, 0, 5)
        buttonsGrid.CellSize = UDim2.new(0.48, 0, 0, 30)
        buttonsGrid.FillDirection = Enum.FillDirection.Horizontal
        buttonsGrid.HorizontalAlignment = Enum.HorizontalAlignment.Center
        buttonsGrid.SortOrder = Enum.SortOrder.LayoutOrder
        buttonsGrid.Parent = buttonsFrame
        
        local function createCommandButton(name, color)
            local button = Instance.new("TextButton")
            button.Size = UDim2.new(1, 0, 0, 30)
            button.BackgroundColor3 = color
            button.TextColor3 = Color3.new(1, 1, 1)
            button.Text = name
            button.TextSize = 12
            button.Font = Enum.Font.GothamBlack
            button.BorderSizePixel = 2
            button.BorderColor3 = Color3.new(1, 1, 1)
            
            local buttonCorner = Instance.new("UICorner")
            buttonCorner.CornerRadius = UDim.new(0, 4)
            buttonCorner.Parent = button
            
            return button
        end
        
        local executeButton = createCommandButton("تنفيذ", Color3.new(0, 0.5, 0))
        local auto1Button = createCommandButton("تلقائي 1", Color3.new(0.2, 0.2, 0.6))
        local auto2Button = createCommandButton("تلقائي 2", Color3.new(0.2, 0.2, 0.6))
        local auto3Button = createCommandButton("تلقائي 3", Color3.new(0.2, 0.2, 0.6))
        local auto4Button = createCommandButton("تلقائي 4", Color3.new(0.2, 0.2, 0.6))
        local auto5Button = createCommandButton("تلقائي 5", Color3.new(0.2, 0.2, 0.6))
        local auto6Button = createCommandButton("تلقائي 6", Color3.new(0.2, 0.2, 0.6))
        local auto7Button = createCommandButton("تلقائي 7", Color3.new(0.2, 0.2, 0.6))
        
        executeButton.Parent = buttonsFrame
        auto1Button.Parent = buttonsFrame
        auto2Button.Parent = buttonsFrame
        auto3Button.Parent = buttonsFrame
        auto4Button.Parent = buttonsFrame
        auto5Button.Parent = buttonsFrame
        auto6Button.Parent = buttonsFrame
        auto7Button.Parent = buttonsFrame
        
        -- أحداث الأزرار
        executeButton.MouseButton1Click:Connect(function()
            local command = inputField.Text
            if command ~= "" then
                executeCommand(command)
            end
        end)
        
        local autoThreads = {}
        
        local function startAutoExecution(button, interval)
            if autoThreads[button] then
                autoThreads[button] = nil
                button.BackgroundColor3 = Color3.new(0.2, 0.2, 0.6)
            else
                autoThreads[button] = true
                button.BackgroundColor3 = Color3.new(0, 0.5, 0)
                
                coroutine.wrap(function()
                    while autoThreads[button] do
                        local command = inputField.Text
                        if command ~= "" then
                            executeCommand(command)
                        end
                        wait(interval)
                    end
                end)()
            end
        end
        
        auto1Button.MouseButton1Click:Connect(function() startAutoExecution(auto1Button, 1) end)
        auto2Button.MouseButton1Click:Connect(function() startAutoExecution(auto2Button, 2) end)
        auto3Button.MouseButton1Click:Connect(function() startAutoExecution(auto3Button, 3) end)
        auto4Button.MouseButton1Click:Connect(function() startAutoExecution(auto4Button, 4) end)
        auto5Button.MouseButton1Click:Connect(function() startAutoExecution(auto5Button, 5) end)
        auto6Button.MouseButton1Click:Connect(function() startAutoExecution(auto6Button, 6) end)
        auto7Button.MouseButton1Click:Connect(function() startAutoExecution(auto7Button, 7) end)
        
        -- تجميع العناصر
        title.Parent = mainFrame
        inputField.Parent = mainFrame
        buttonsFrame.Parent = mainFrame
        mainFrame.Parent = commandFieldGui
        commandFieldGui.Parent = CoreGui
        
    else
        if commandFieldGui then
            commandFieldGui:Destroy()
            commandFieldGui = nil
        end
        
        featuresButtonInstances["commandField"].Text = "حقل الاوامر"
        featuresButtonInstances["commandField"].BackgroundColor3 = Color3.new(0, 0, 0)
    end
end

-- زر Wa7eed
local function executeWa7eedTitle()
    pcall(function()
        game:GetService("ReplicatedStorage").Events.SendMessage:FireServer(".titlebk me ❖彡Ｗａ７ｅｅｄ彡❖")
    end)
end

-- زر 2EVER
local function execute2everTitle()
    pcall(function()
        game:GetService("ReplicatedStorage").Events.SendMessage:FireServer(".title me ★彡2ᴇᴠᴇR彡★")
    end)
end

-- الدخول والخروج
local function toggleJoinLeaveNotif()
    joinLeaveNotifActive = not joinLeaveNotifActive
    
    if joinLeaveNotifActive then
        featuresButtonInstances["joinLeaveNotif"].Text = "الدخول والخروج ✅"
        featuresButtonInstances["joinLeaveNotif"].BackgroundColor3 = Color3.new(0, 0.5, 0)
        
        joinLeaveConnection = Players.PlayerAdded:Connect(function(joiningPlayer)
            showNotification("✅ " .. joiningPlayer.Name .. " دخل السيرفر", {
                Image = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. joiningPlayer.UserId .. "&width=150&height=150&format=png"
            }, false)
        end)
        
        -- إضافة حدث الخروج
        Players.PlayerRemoving:Connect(function(leavingPlayer)
            if joinLeaveNotifActive then
                showNotification("🚪 " .. leavingPlayer.Name .. " خرج من السيرفر", {
                    Image = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. leavingPlayer.UserId .. "&width=150&height=150&format=png"
                }, false)
            end
        end)
    else
        if joinLeaveConnection then
            joinLeaveConnection:Disconnect()
            joinLeaveConnection = nil
        end
        
        featuresButtonInstances["joinLeaveNotif"].Text = "الدخول والخروج"
        featuresButtonInstances["joinLeaveNotif"].BackgroundColor3 = Color3.new(0, 0, 0)
    end
end

-- كم فيه سيرفر
local function showServerCount()
    local playerCount = #Players:GetPlayers()
    local maxPlayers = Players.MaxPlayers
    showNotification("👥 عدد اللاعبين: " .. playerCount .. "/" .. maxPlayers, nil, false)
end

-- أداة السلام
local function toggleWaveTool()
    waveToolActive = not waveToolActive
    
    if waveToolActive then
        featuresButtonInstances["waveTool"].Text = "اداه السلام ✅"
        featuresButtonInstances["waveTool"].BackgroundColor3 = Color3.new(0, 0.5, 0)
        
        -- إنشاء أداة السلام
        waveToolInstance = Instance.new("Tool")
        waveToolInstance.Name = "WaveTool"
        waveToolInstance.ToolTip = "أداة السلام - Wa7eed"
        
        local handle = Instance.new("Part")
        handle.Name = "Handle"
        handle.Size = Vector3.new(1, 1, 1)
        handle.BrickColor = BrickColor.new("Bright blue")
        handle.Parent = waveToolInstance
        
        -- أنيميشن السلام
        waveToolInstance.Activated:Connect(function()
            local character = player.Character
            if character then
                local humanoid = character:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    -- تحميل أنيميشن السلام
                    local animation = Instance.new("Animation")
                    animation.AnimationId = "rbxassetid://188881439"
                    local waveAnim = humanoid:LoadAnimation(animation)
                    waveAnim:Play()
                end
            end
        end)
        
        waveToolInstance.Parent = player.Backpack
    else
        if waveToolInstance then
            waveToolInstance:Destroy()
            waveToolInstance = nil
        end
        
        featuresButtonInstances["waveTool"].Text = "اداه السلام"
        featuresButtonInstances["waveTool"].BackgroundColor3 = Color3.new(0, 0, 0)
    end
end

-- أداة الكشاف
local function toggleFlashlightTool()
    flashlightToolActive = not flashlightToolActive
    
    if flashlightToolActive then
        featuresButtonInstances["flashlightTool"].Text = "اداه الكشاف ✅"
        featuresButtonInstances["flashlightTool"].BackgroundColor3 = Color3.new(0, 0.5, 0)
        
        -- إنشاء أداة الكشاف
        flashlightToolInstance = Instance.new("Tool")
        flashlightToolInstance.Name = "FlashlightTool"
        flashlightToolInstance.ToolTip = "أداة الكشاف - Wa7eed"
        
        local handle = Instance.new("Part")
        handle.Name = "Handle"
        handle.Size = Vector3.new(0.5, 0.5, 2)
        handle.BrickColor = BrickColor.new("Bright yellow")
        handle.Material = Enum.Material.Neon
        handle.Parent = flashlightToolInstance
        
        -- إضافة ضوء الكشاف
        local spotlight = Instance.new("SpotLight")
        spotlight.Brightness = 10
        spotlight.Range = 50
        spotlight.Angle = 45
        spotlight.Color = Color3.new(1, 1, 1)
        spotlight.Parent = handle
        
        flashlightToolInstance.Parent = player.Backpack
    else
        if flashlightToolInstance then
            flashlightToolInstance:Destroy()
            flashlightToolInstance = nil
        end
        
        featuresButtonInstances["flashlightTool"].Text = "اداه الكشاف"
        featuresButtonInstances["flashlightTool"].BackgroundColor3 = Color3.new(0, 0, 0)
    end
end

-- لستة اللاعبين
local function togglePlayerList()
    playerListActive = not playerListActive
    
    if playerListActive then
        featuresButtonInstances["playerList"].Text = "لستة اللاعبين ✅"
        featuresButtonInstances["playerList"].BackgroundColor3 = Color3.new(0, 0.5, 0)
        
        -- إنشاء واجهة لستة اللاعبين
        playerListGui = Instance.new("ScreenGui")
        playerListGui.Name = "PlayerListGui"
        playerListGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
        playerListGui.ResetOnSpawn = false
        
        local mainFrame = Instance.new("Frame")
        mainFrame.Size = UDim2.new(0, 200, 0, 300)
        mainFrame.Position = UDim2.new(0, 10, 0, 100)
        mainFrame.BackgroundColor3 = Color3.new(0, 0, 0)
        mainFrame.BorderSizePixel = 3
        mainFrame.BorderColor3 = Color3.new(1, 1, 1)
        mainFrame.Active = true
        mainFrame.Draggable = true
        
        local corner = Instance.new("UICorner")
        corner.CornerRadius = UDim.new(0, 8)
        corner.Parent = mainFrame
        
        local title = Instance.new("TextLabel")
        title.Size = UDim2.new(1, 0, 0, 30)
        title.Position = UDim2.new(0, 0, 0, 0)
        title.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
        title.TextColor3 = Color3.new(1, 1, 1)
        title.Text = "لستة اللاعبين"
        title.TextSize = 14
        title.Font = Enum.Font.GothamBlack
        title.BorderSizePixel = 3
        title.BorderColor3 = Color3.new(1, 1, 1)
        title.TextXAlignment = Enum.TextXAlignment.Center
        
        local titleCorner = Instance.new("UICorner")
        titleCorner.CornerRadius = UDim.new(0, 6)
        titleCorner.Parent = title
        
        local scrollFrame = Instance.new("ScrollingFrame")
        scrollFrame.Size = UDim2.new(1, -10, 1, -40)
        scrollFrame.Position = UDim2.new(0, 5, 0, 35)
        scrollFrame.BackgroundTransparency = 1
        scrollFrame.ScrollBarThickness = 8
        scrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
        
        local listLayout = Instance.new("UIListLayout")
        listLayout.Padding = UDim.new(0, 5)
        listLayout.Parent = scrollFrame
        
        -- زر التصغير
        local minimizeButton = Instance.new("TextButton")
        minimizeButton.Size = UDim2.new(0, 30, 0, 30)
        minimizeButton.Position = UDim2.new(1, -35, 0, 5)
        minimizeButton.BackgroundColor3 = Color3.new(0, 0, 0)
        minimizeButton.TextColor3 = Color3.new(1, 1, 1)
        minimizeButton.Text = "W"
        minimizeButton.TextSize = 14
        minimizeButton.Font = Enum.Font.GothamBlack
        minimizeButton.BorderSizePixel = 2
        minimizeButton.BorderColor3 = Color3.new(1, 1, 1)
        
        local minimizeCorner = Instance.new("UICorner")
        minimizeCorner.CornerRadius = UDim.new(0, 6)
        minimizeCorner.Parent = minimizeButton
        
        local isMinimized = false
        
        minimizeButton.MouseButton1Click:Connect(function()
            isMinimized = not isMinimized
            if isMinimized then
                mainFrame.Size = UDim2.new(0, 40, 0, 40)
                scrollFrame.Visible = false
                title.Visible = false
            else
                mainFrame.Size = UDim2.new(0, 200, 0, 300)
                scrollFrame.Visible = true
                title.Visible = true
            end
        end)
        
        -- تحديث لستة اللاعبين
        local function updatePlayerList()
            for _, child in pairs(scrollFrame:GetChildren()) do
                if child:IsA("TextButton") then
                    child:Destroy()
                end
            end
            
            local players = Players:GetPlayers()
            scrollFrame.CanvasSize = UDim2.new(0, 0, 0, #players * 35)
            
            for i, plr in pairs(players) do
                local playerButton = Instance.new("TextButton")
                playerButton.Size = UDim2.new(1, 0, 0, 30)
                playerButton.Position = UDim2.new(0, 0, 0, (i-1) * 35)
                playerButton.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
                playerButton.TextColor3 = Color3.new(1, 1, 1)
                playerButton.Text = plr.Name
                playerButton.TextSize = 12
                playerButton.Font = Enum.Font.GothamBold
                playerButton.BorderSizePixel = 2
                playerButton.BorderColor3 = Color3.new(1, 1, 1)
                
                local buttonCorner = Instance.new("UICorner")
                buttonCorner.CornerRadius = UDim.new(0, 4)
                buttonCorner.Parent = playerButton
                
                playerButton.MouseButton1Click:Connect(function()
                    setclipboard(plr.Name)
                    showNotification("✅ تم نسخ اسم اللاعب: " .. plr.Name, nil, false)
                end)
                
                playerButton.Parent = scrollFrame
            end
        end
        
        -- تحديث اللستة عند دخول أو خروج اللاعبين
        Players.PlayerAdded:Connect(updatePlayerList)
        Players.PlayerRemoving:Connect(updatePlayerList)
        
        -- التحديث الأولي
        updatePlayerList()
        
        -- تجميع العناصر
        title.Parent = mainFrame
        scrollFrame.Parent = mainFrame
        minimizeButton.Parent = mainFrame
        mainFrame.Parent = playerListGui
        playerListGui.Parent = CoreGui
        
    else
        if playerListGui then
            playerListGui:Destroy()
            playerListGui = nil
        end
        
        featuresButtonInstances["playerList"].Text = "لستة اللاعبين"
        featuresButtonInstances["playerList"].BackgroundColor3 = Color3.new(0, 0, 0)
    end
end

-- نظام التبديل بين الأقسام
local function showSection(sectionName)
    VictimSection.Visible = (sectionName == "الضحيه")
    PlayerSection.Visible = (sectionName == "اللاعب")
    FeaturesSection.Visible = (sectionName == "المميزات")
    SpamSection.Visible = (sectionName == "سبام")
    RightsSection.Visible = (sectionName == "الحقوق")
    
    -- تحديث ألوان أزرار الأقسام
    VictimTab.BackgroundColor3 = (sectionName == "الضحيه") and Color3.new(0.2, 0.2, 0.2) or Color3.new(0.1, 0.1, 0.1)
    PlayerTab.BackgroundColor3 = (sectionName == "اللاعب") and Color3.new(0.2, 0.2, 0.2) or Color3.new(0.1, 0.1, 0.1)
    FeaturesTab.BackgroundColor3 = (sectionName == "المميزات") and Color3.new(0.2, 0.2, 0.2) or Color3.new(0.1, 0.1, 0.1)
    SpamTab.BackgroundColor3 = (sectionName == "سبام") and Color3.new(0.2, 0.2, 0.2) or Color3.new(0.1, 0.1, 0.1)
    RightsTab.BackgroundColor3 = (sectionName == "الحقوق") and Color3.new(0.2, 0.2, 0.2) or Color3.new(0.1, 0.1, 0.1)
end

-- إصلاح زر التفعيل
ToggleButton.MouseButton1Click:Connect(function()
    local isVisible = MainFrame.Visible
    MainFrame.Visible = not isVisible
    
    if not isVisible then
        -- فتح القائمة
        MainFrame.Size = UDim2.new(0, 0, 0, 0)
        MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
        
        local tweenInfo = TweenInfo.new(0.7, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
        local tween = TweenService:Create(MainFrame, tweenInfo, {
            Size = UDim2.new(0, 500, 0, 600),
            Position = UDim2.new(0.5, -250, 0.5, -300)
        })
        tween:Play()
        
        -- أنيميشن زر التفعيل عند الفتح
        local buttonTween = TweenService:Create(ToggleButton, TweenInfo.new(0.3), {
            BackgroundColor3 = Color3.new(0.2, 0.2, 0.2),
            Rotation = 360
        })
        buttonTween:Play()
    else
        -- إغلاق القائمة
        local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.In)
        local tween = TweenService:Create(MainFrame, tweenInfo, {
            Size = UDim2.new(0, 0, 0, 0),
            Position = UDim2.new(0.5, 0, 0.5, 0)
        })
        tween:Play()
        
        -- أنيميشن زر التفعيل عند الإغلاق
        local buttonTween = TweenService:Create(ToggleButton, TweenInfo.new(0.3), {
            BackgroundColor3 = Color3.new(0, 0, 0),
            Rotation = 0
        })
        buttonTween:Play()
    end
end)

-- أحداث أزرار الأقسام
VictimTab.MouseButton1Click:Connect(function() showSection("الضحيه") end)
PlayerTab.MouseButton1Click:Connect(function() showSection("اللاعب") end)
FeaturesTab.MouseButton1Click:Connect(function() showSection("المميزات") end)
SpamTab.MouseButton1Click:Connect(function() showSection("سبام") end)
RightsTab.MouseButton1Click:Connect(function() showSection("الحقوق") end)

-- تحديد الضحية
SetVictimButton.MouseButton1Click:Connect(function()
    local username = VictimInput.Text
    if username ~= "" then
        if #username >= 3 then
            local victimPlayer = findPlayerByPartialName(username)
            if victimPlayer then
                updateVictimInfo(victimPlayer)
                VictimInput.Text = ""
                
                -- إعادة تعيين حالة الأزرار عند اختيار ضحية جديدة
                bangWasActive = false
                bangFrontWasActive = false
                
                showNotification("✅ تم تحديد الضحية: " .. victimPlayer.Name, {
                    Image = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. victimPlayer.UserId .. "&width=150&height=150&format=png"
                }, false)
            else
                showNotification("❌ لم يتم العثور على اللاعب: " .. username, nil, false)
            end
        else
            showNotification("❌ أدخل 3 أحرف على الأقل", nil, false)
        end
    else
        showNotification("❌ أدخل اسم المستخدم", nil, false)
    end
end)

-- توصيل جميع أزرار الضحية (محدثة ومصححة)
buttonInstances["spectate"].MouseButton1Click:Connect(toggleSpectate)
buttonInstances["teleport"].MouseButton1Click:Connect(teleportToPlayer)
buttonInstances["reset"].MouseButton1Click:Connect(function() executeVictimCommand(".re") end)
buttonInstances["to"].MouseButton1Click:Connect(function() executeVictimCommand(".to") end)
buttonInstances["dog"].MouseButton1Click:Connect(function() executeVictimCommand(".dog") end)
buttonInstances["worm"].MouseButton1Click:Connect(function() executeVictimCommand(".worm") end)
buttonInstances["neon"].MouseButton1Click:Connect(function() executeVictimCommand(".neon") end)
buttonInstances["red"].MouseButton1Click:Connect(function() executeColorCommand("Red") end)
buttonInstances["pink"].MouseButton1Click:Connect(function() executeColorCommand("pink") end)
buttonInstances["green"].MouseButton1Click:Connect(function() executeColorCommand("Green") end)
buttonInstances["blue"].MouseButton1Click:Connect(function() executeColorCommand("Blue") end)
buttonInstances["black"].MouseButton1Click:Connect(function() executeColorCommand("Black") end)
buttonInstances["darkblue"].MouseButton1Click:Connect(function() executeColorCommand("DarkBlue") end)
buttonInstances["yellow"].MouseButton1Click:Connect(function() executeColorCommand("Yellow") end)
buttonInstances["orange"].MouseButton1Click:Connect(function() executeColorCommand("Orange") end)
buttonInstances["purple"].MouseButton1Click:Connect(function() executeColorCommand("Purple") end)
buttonInstances["uncolour"].MouseButton1Click:Connect(function() executeVictimCommand(".uncolour") end)
buttonInstances["fly60"].MouseButton1Click:Connect(function() executeFlyCommand("60") end)
buttonInstances["fly120"].MouseButton1Click:Connect(function() executeFlyCommand("120") end)
buttonInstances["fly220"].MouseButton1Click:Connect(executeFly220Command)
buttonInstances["unfly"].MouseButton1Click:Connect(function() executeVictimCommand(".unfly") end)
buttonInstances["speed60"].MouseButton1Click:Connect(function() executeSpeedCommand("60") end)
buttonInstances["speed120"].MouseButton1Click:Connect(function() executeSpeedCommand("120") end)
buttonInstances["speed220"].MouseButton1Click:Connect(executeSpeed220Command)
buttonInstances["fryDance"].MouseButton1Click:Connect(function() executeVictimCommand(".fryDance") end)
buttonInstances["takethel"].MouseButton1Click:Connect(function() executeVictimCommand(".takethel") end)
buttonInstances["fakeDeath"].MouseButton1Click:Connect(function() executeVictimCommand(".fakeDeath") end)
buttonInstances["ratDance"].MouseButton1Click:Connect(function() executeVictimCommand(".ratDance") end)
buttonInstances["cuteSit"].MouseButton1Click:Connect(function() executeVictimCommand(".cuteSit") end)
buttonInstances["fat"].MouseButton1Click:Connect(function() executeVictimCommand(".fat") end)
buttonInstances["thin"].MouseButton1Click:Connect(function() executeVictimCommand(".thin") end)
buttonInstances["hide"].MouseButton1Click:Connect(function() executeVictimCommand(".hide") end)
buttonInstances["box"].MouseButton1Click:Connect(function() executeVictimCommand(".Box") end)
buttonInstances["aura"].MouseButton1Click:Connect(function() executeVictimCommand(".aura") end)
buttonInstances["car"].MouseButton1Click:Connect(function() executeVictimCommand(".car") end)
buttonInstances["smoke"].MouseButton1Click:Connect(function() executeVictimCommand(".smoke") end)
buttonInstances["unsmoke"].MouseButton1Click:Connect(function() executeVictimCommand(".unsmoke") end)
buttonInstances["fire"].MouseButton1Click:Connect(function() executeVictimCommand(".fire") end)
buttonInstances["unfire"].MouseButton1Click:Connect(function() executeVictimCommand(".unfire") end)
buttonInstances["buffify"].MouseButton1Click:Connect(function() executeVictimCommand(".buffify") end)
buttonInstances["emote"].MouseButton1Click:Connect(function() executeVictimCommand(".emote") end)
buttonInstances["tank"].MouseButton1Click:Connect(function() executeVictimCommand(".tank") end)
buttonInstances["charMiri"].MouseButton1Click:Connect(function() executeCharSkinCommand("miri") end)
buttonInstances["charCrazy"].MouseButton1Click:Connect(function() executeCharSkinCommand("crazydalejrd") end)
buttonInstances["size3"].MouseButton1Click:Connect(function() executeSizeCommand("3") end)
buttonInstances["size2"].MouseButton1Click:Connect(function() executeSizeCommand("2") end)
buttonInstances["size1"].MouseButton1Click:Connect(function() executeSizeCommand("1") end)
buttonInstances["gold"].MouseButton1Click:Connect(function() executeVictimCommand(".gold") end)
buttonInstances["glass"].MouseButton1Click:Connect(function() executeVictimCommand(".glass") end)
buttonInstances["ref"].MouseButton1Click:Connect(function() executeVictimCommand(".ref") end)
buttonInstances["suspendVictim"].MouseButton1Click:Connect(executeSuspendVictimCommand)
buttonInstances["unsuspendVictim"].MouseButton1Click:Connect(executeUnsuspendVictimCommand)
buttonInstances["suspendFly"].MouseButton1Click:Connect(executeSuspendFlyCommand)
buttonInstances["unsuspendFly"].MouseButton1Click:Connect(executeUnsuspendFlyCommand)
buttonInstances["copy1"].MouseButton1Click:Connect(function()
    if currentVictim then
        executeCommand(".dog " .. currentVictim .. " .size " .. currentVictim .. " 3 .neon " .. currentVictim .. " .colour " .. currentVictim .. " pink ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end)

-- الأزرار الجديدة
buttonInstances["wormify"].MouseButton1Click:Connect(function() executeVictimCommand(".wormify") end)
buttonInstances["chibify"].MouseButton1Click:Connect(function() executeVictimCommand(".chibify") end)
buttonInstances["plushify"].MouseButton1Click:Connect(function() executeVictimCommand(".plushify") end)
buttonInstances["frogify"].MouseButton1Click:Connect(function() executeVictimCommand(".frogify") end)
buttonInstances["spongify"].MouseButton1Click:Connect(function() executeVictimCommand(".spongify") end)
buttonInstances["bigify"].MouseButton1Click:Connect(function() executeVictimCommand(".bigify") end)
buttonInstances["creepify"].MouseButton1Click:Connect(function() executeVictimCommand(".creepify") end)
buttonInstances["dinofy"].MouseButton1Click:Connect(function() executeVictimCommand(".dinofy") end)
buttonInstances["fatify"].MouseButton1Click:Connect(function() executeVictimCommand(".fatify") end)
buttonInstances["shine"].MouseButton1Click:Connect(function() executeVictimCommand(".shine") end)
buttonInstances["ghost"].MouseButton1Click:Connect(function() executeVictimCommand(".ghost") end)
buttonInstances["giantDwarf"].MouseButton1Click:Connect(function() executeVictimCommand(".giantDwarf") end)
buttonInstances["shirt"].MouseButton1Click:Connect(function() executeVictimCommand(".shirt") end)
buttonInstances["pants"].MouseButton1Click:Connect(function() executeVictimCommand(".pants") end)
buttonInstances["head"].MouseButton1Click:Connect(function() executeVictimCommand(".head") end)
buttonInstances["helicopter"].MouseButton1Click:Connect(function() executeVictimCommand(".helicopter") end)

-- أزرار النسخ الجديدة
buttonInstances["copy2"].MouseButton1Click:Connect(function()
    if currentVictim then
        executeCommand(".worm " .. currentVictim .. " .size " .. currentVictim .. " 3 .neon " .. currentVictim .. " .colour " .. currentVictim .. " Black ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end)

buttonInstances["copy3"].MouseButton1Click:Connect(function()
    if currentVictim then
        executeCommand(".emote " .. currentVictim .. " .size " .. currentVictim .. " 3 .neon " .. currentVictim .. " .colour " .. currentVictim .. " pink ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end)

buttonInstances["copy4"].MouseButton1Click:Connect(function()
    if currentVictim then
        executeCommand(".giantDwarf " .. currentVictim .. " .fat " .. currentVictim .. " .size " .. currentVictim .. " 3 .neon " .. currentVictim .. " .colour " .. currentVictim .. " pink ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end)

buttonInstances["copy5"].MouseButton1Click:Connect(function()
    if currentVictim then
        executeCommand(".giantDwarf " .. currentVictim .. " .size " .. currentVictim .. " 3 .thin " .. currentVictim .. " .neon " .. currentVictim .. " .colour " .. currentVictim .. " O ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end)

buttonInstances["copy6"].MouseButton1Click:Connect(function()
    if currentVictim then
        executeCommand(".emote " .. currentVictim .. " .shine " .. currentVictim .. " .colour " .. currentVictim .. " Pink .sit " .. currentVictim .. " .size " .. currentVictim .. " 3 ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end)

buttonInstances["copy7"].MouseButton1Click:Connect(function()
    if currentVictim then
        executeCommand(".char " .. currentVictim .. " miri .dog " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end)

buttonInstances["copy8"].MouseButton1Click:Connect(function()
    if currentVictim then
        executeCommand(".helicopter " .. currentVictim .. " .thin " .. currentVictim .. " .sit " .. currentVictim .. " .size " .. currentVictim .. " 3 .neon " .. currentVictim .. " .colour " .. currentVictim .. " Y ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end)

buttonInstances["copy9"].MouseButton1Click:Connect(function()
    if currentVictim then
        executeCommand(".takethel " .. currentVictim .. " .sit " .. currentVictim .. " .size " .. currentVictim .. " 2 .pants " .. currentVictim .. " .giantDwarf " .. currentVictim .. " .fat " .. currentVictim .. " ")
    else
        showNotification("❌ لم يتم تحديد ضحية", nil, false)
    end
end)

buttonInstances["copy12"].MouseButton1Click:Connect(executeCopy12)

-- توصيل الأزرار الجديدة المطلوبة
buttonInstances["phase"].MouseButton1Click:Connect(executePhaseCommand)
buttonInstances["char"].MouseButton1Click:Connect(executeCharCommand)
buttonInstances["unchar"].MouseButton1Click:Connect(executeUncharCommand)
buttonInstances["undog"].MouseButton1Click:Connect(executeUndogCommand)
buttonInstances["unneon"].MouseButton1Click:Connect(executeUnneonCommand)
buttonInstances["unwormify"].MouseButton1Click:Connect(executeUnwormifyCommand)
buttonInstances["copy10"].MouseButton1Click:Connect(executeCopy10Command)
buttonInstances["copy11"].MouseButton1Click:Connect(executeCopy11Command)
buttonInstances["copy13"].MouseButton1Click:Connect(executeCopy13Command)
buttonInstances["copy14"].MouseButton1Click:Connect(executeCopy14Command)
buttonInstances["copy15"].MouseButton1Click:Connect(executeCopy15Command)

-- توصيل الأزرار الجديدة
buttonInstances["bang"].MouseButton1Click:Connect(toggleBang)
buttonInstances["bangFront"].MouseButton1Click:Connect(toggleBangFront)

-- توصيل زر بانق بالراس الجديد
buttonInstances["headSuck"].MouseButton1Click:Connect(toggleHeadSuck)

-- توصيل الأزرار الجديدة المطلوبة
buttonInstances["white"].MouseButton1Click:Connect(executeWhiteCommand)
buttonInstances["suspendF"].MouseButton1Click:Connect(executeSuspendFCommand)
buttonInstances["unsuspendF"].MouseButton1Click:Connect(executeUnsuspendFCommand)
buttonInstances["suspendJump"].MouseButton1Click:Connect(executeSuspendJumpCommand)
buttonInstances["unsuspendJump"].MouseButton1Click:Connect(executeUnsuspendJumpCommand)
buttonInstances["flyInAir"].MouseButton1Click:Connect(executeFlyInAirCommand)
buttonInstances["view"].MouseButton1Click:Connect(executeViewCommand)
buttonInstances["unview"].MouseButton1Click:Connect(executeUnviewCommand)
buttonInstances["stopAll"].MouseButton1Click:Connect(executeStopAllCommand)
buttonInstances["copy16"].MouseButton1Click:Connect(executeCopy16Command)
buttonInstances["copy17"].MouseButton1Click:Connect(executeCopy17Command)
buttonInstances["copy18"].MouseButton1Click:Connect(executeCopy18Command)
buttonInstances["copy19"].MouseButton1Click:Connect(executeCopy19Command)
buttonInstances["copy20"].MouseButton1Click:Connect(executeCopy20Command)
buttonInstances["cripple"].MouseButton1Click:Connect(executeCrippleCommand)

-- توصيل الأزرار التلقائية الجديدة المعدلة الأوقات
buttonInstances["autoSuspendF"].MouseButton1Click:Connect(function()
    toggleAutoButton("autoSuspendF", executeSuspendFCommand, 2)
end)

buttonInstances["autoReset"].MouseButton1Click:Connect(function()
    toggleAutoButton("autoReset", function() executeVictimCommand(".re") end, 2)
end)

buttonInstances["autoFlyInAir"].MouseButton1Click:Connect(function()
    toggleAutoButton("autoFlyInAir", executeFlyInAirCommand, 3)
end)

buttonInstances["autoJump"].MouseButton1Click:Connect(function()
    toggleAutoButton("autoJump", function() executeVictimCommand(".jump") end, 2)
end)

buttonInstances["autoStopAll"].MouseButton1Click:Connect(function()
    toggleAutoButton("autoStopAll", executeStopAllCommand, 5)
end)

buttonInstances["autoCopy1"].MouseButton1Click:Connect(function()
    toggleAutoButton("autoCopy1", function()
        if currentVictim then
            executeCommand(".wormify  " .. currentVictim .. " .giantDwarf " .. currentVictim .. " .dog " .. currentVictim .. " .neon " .. currentVictim .. " .colour " .. currentVictim .. " P .speed " .. currentVictim .. " 01. ")
        end
    end, 2)
end)

buttonInstances["autoCopy2"].MouseButton1Click:Connect(function()
    toggleAutoButton("autoCopy2", executeCopy16Command, 2)
end)

buttonInstances["autoCopy3"].MouseButton1Click:Connect(function()
    toggleAutoButton("autoCopy3", executeCopy17Command, 2)
end)

buttonInstances["autoCopy4"].MouseButton1Click:Connect(function()
    toggleAutoButton("autoCopy4", executeCopy18Command, 2)
end)

buttonInstances["autoCopy5"].MouseButton1Click:Connect(function()
    toggleAutoButton("autoCopy5", executeCopy19Command, 2)
end)

buttonInstances["autoCopy6"].MouseButton1Click:Connect(function()
    toggleAutoButton("autoCopy6", executeCopy20Command, 2)
end)

buttonInstances["autoCripple"].MouseButton1Click:Connect(function()
    toggleAutoButton("autoCripple", executeCrippleCommand, 2)
end)

-- توصيل الأزرار التلقائية الجديدة المضافة
buttonInstances["autoSuspendFly"].MouseButton1Click:Connect(function()
    toggleAutoButton("autoSuspendFly", function()
        if currentVictim then
            executeCommand(".fly " .. currentVictim .. " 10. ")
        end
    end, 2)
end)

buttonInstances["autoDog"].MouseButton1Click:Connect(function()
    toggleAutoButton("autoDog", function() executeVictimCommand(".dog") end, 2)
end)

-- توصيل زر بانق تشويش الجديد
buttonInstances["bangChaos"].MouseButton1Click:Connect(function()
    if bangChaosActive then
        -- إيقاف بانق تشويش
        bangChaosActive = false
        if bangChaosThread then
            bangChaosThread = nil
        end
        
        buttonInstances["bangChaos"].Text = "بانق تشويش"
        buttonInstances["bangChaos"].BackgroundColor3 = Color3.new(0, 0, 0)
        
        -- إعادة اللاعب إلى طبيعته
        if player.Character then
            local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
            local rootPart = player.Character:FindFirstChild("HumanoidRootPart")
            
            if humanoid and rootPart then
                humanoid.PlatformStand = false
                humanoid:ChangeState(Enum.HumanoidStateType.Running)
                
                -- إزالة أي تأثيرات فيزيائية
                for _, part in pairs(player.Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.Velocity = Vector3.new(0, 0, 0)
                        part.RotVelocity = Vector3.new(0, 0, 0)
                    end
                end
            end
        end
    else
        -- تفعيل بانق تشويش
        if currentVictim then
            bangChaosActive = true
            buttonInstances["bangChaos"].Text = "بانق تشويش ✅"
            buttonInstances["bangChaos"].BackgroundColor3 = Color3.new(0, 0.5, 0)
            
            -- تنفيذ وظيفة بانق تشويش
            bangChaosThread = coroutine.wrap(function()
                local TargetName = currentVictim
                
                local Players = game:GetService("Players")
                local Player = Players.LocalPlayer
                local TargetPlayer = nil
                local IsFlinging = false

                -- الإزاحة البسيطة المطلوبة (Vector3)
                local SIMPLE_OFFSET = Vector3.new(0, 0.5, 0)

                -- دالة للبحث عن اللاعب المستهدف
                local GetPlayer = function(Name)
                    Name = Name:lower()
                    for _,x in next, Players:GetPlayers() do
                        if x ~= Player then
                            if x.Name:lower():match("^"..Name) or x.DisplayName:lower():match("^"..Name) then
                                return x;
                            end
                        end
                    end
                    return nil
                end

                -- دالة Fling المعدلة
                local SkidFling = function(TargetPlayer)
                    if not TargetPlayer or IsFlinging then return end
                    IsFlinging = true

                    local Character = Player.Character
                    local Humanoid = Character and Character:FindFirstChildOfClass("Humanoid")
                    local RootPart = Humanoid and Humanoid.RootPart

                    local TCharacter = TargetPlayer.Character
                    local THumanoid
                    local TRootPart
                    local THead
                    local Accessory
                    local Handle

                    if not TCharacter then
                        IsFlinging = false
                        return
                    end

                    THumanoid = TCharacter:FindFirstChildOfClass("Humanoid")
                    if THumanoid and THumanoid.RootPart then
                        TRootPart = THumanoid.RootPart
                    end
                    if TCharacter:FindFirstChild("Head") then
                        THead = TCharacter.Head
                    end
                    Accessory = TCharacter:FindFirstChildOfClass("Accessory")
                    if Accessory and Accessory:FindFirstChild("Handle") then
                        Handle = Accessory.Handle
                    end

                    if Character and Humanoid and RootPart then
                        -- حفظ الموضع القديم
                        getgenv().OldPos = RootPart.CFrame
                        
                        -- توجيه الكاميرا
                        if THead then
                            workspace.CurrentCamera.CameraSubject = THead
                        elseif Handle then
                            workspace.CurrentCamera.CameraSubject = Handle
                        elseif THumanoid and TRootPart then
                            workspace.CurrentCamera.CameraSubject = THumanoid
                        end
                        
                        if not TCharacter:FindFirstChildWhichIsA("BasePart") then
                            IsFlinging = false
                            return
                        end
                        
                        local FPos = function(BasePart, RotationCFrame, CurrentAngle)
                            -- الإزاحة الحركية (Dynamic Offset)
                            local offset_magnitude = 0.1
                            local dynamic_offset = Vector3.new(
                                math.cos(CurrentAngle / 10000000000) * offset_magnitude,
                                SIMPLE_OFFSET.Y,
                                math.sin(CurrentAngle / 10000000000) * offset_magnitude
                            )
                            
                            local TargetCFrame = BasePart.CFrame + dynamic_offset
                            
                            RootPart.CFrame = TargetCFrame * RotationCFrame
                            Character:SetPrimaryPartCFrame(TargetCFrame * RotationCFrame)
                            
                            RootPart.Velocity = Vector3.new(9e7, 9e7 * 10, 9e7)
                            RootPart.RotVelocity = Vector3.new(9e8, 9e8, 9e8)
                        end
                        
                        local SFBasePart = function(BasePart)
                            local Angle = 0
                            local ANGLE_INCREMENT = 50000000000
                            
                            while bangChaosActive and RootPart and THumanoid and TargetPlayer.Character and THumanoid.Health > 0 do
                                Angle = Angle + ANGLE_INCREMENT
                                
                                -- حركات دوران متعددة
                                FPos(BasePart, CFrame.Angles(math.rad(Angle), math.rad(Angle), math.rad(Angle)), Angle)
                                task.wait(0.001)
                                
                                FPos(BasePart, CFrame.Angles(math.rad(Angle * 2), math.rad(Angle * 3), math.rad(Angle * 5)), Angle)
                                task.wait(0.001)
                                
                                local cos_angle = math.cos(Angle / 10000000) * 50000000000
                                FPos(BasePart, CFrame.Angles(math.rad(cos_angle), math.rad(Angle), math.rad(cos_angle)), Angle)
                                task.wait(0.001)
                                
                                if not bangChaosActive then break end
                            end
                        end
                        
                        workspace.FallenPartsDestroyHeight = 0/0
                        
                        local BV = Instance.new("BodyVelocity")
                        BV.Name = "EpixVel"
                        BV.Parent = RootPart
                        BV.Velocity = Vector3.new(9e8, 9e8, 9e8)
                        BV.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
                        
                        Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, false)
                        
                        local BasePartToFling = nil
                        if TRootPart and THead then
                            if (TRootPart.CFrame.p - THead.CFrame.p).Magnitude > 5 then
                                BasePartToFling = THead
                            else
                                BasePartToFling = TRootPart
                            end
                        elseif TRootPart then
                            BasePartToFling = TRootPart
                        elseif THead then
                            BasePartToFling = THead
                        elseif Accessory and Handle then
                            BasePartToFling = Handle
                        else
                            BV:Destroy()
                            Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, true)
                            workspace.CurrentCamera.CameraSubject = Humanoid
                            IsFlinging = false
                            return
                        end

                        task.spawn(function()
                            SFBasePart(BasePartToFling)
                            
                            BV:Destroy()
                            Humanoid:SetStateEnabled(Enum.HumanoidStateType.Seated, true)
                            workspace.CurrentCamera.CameraSubject = Humanoid
                            
                            repeat
                                RootPart.CFrame = getgenv().OldPos * CFrame.new(SIMPLE_OFFSET)
                                Character:SetPrimaryPartCFrame(getgenv().OldPos * CFrame.new(SIMPLE_OFFSET))
                                Humanoid:ChangeState("GettingUp")
                                table.foreach(Character:GetChildren(), function(_, x)
                                    if x:IsA("BasePart") then
                                        x.Velocity, x.RotVelocity = Vector3.new(), Vector3.new()
                                    end
                                end)
                                task.wait()
                            until (RootPart.Position - getgenv().OldPos.p).Magnitude < 25
                            workspace.FallenPartsDestroyHeight = getgenv().FPDH
                            IsFlinging = false
                        end)
                    else
                        IsFlinging = false
                        return
                    end
                end

                -- الحلقة الرئيسية
                while bangChaosActive do
                    local newTargetPlayer = GetPlayer(TargetName)
                    
                    if newTargetPlayer and newTargetPlayer ~= Player and newTargetPlayer ~= TargetPlayer then
                        TargetPlayer = newTargetPlayer
                        if not IsFlinging then
                            SkidFling(TargetPlayer)
                        end
                    elseif newTargetPlayer and newTargetPlayer == TargetPlayer and not IsFlinging then
                        SkidFling(TargetPlayer)
                    elseif not newTargetPlayer and TargetPlayer then
                        TargetPlayer = nil
                    end
                    
                    task.wait(0.1)
                end
            end)()
        else
            showNotification("❌ لم يتم تحديد ضحية", nil, false)
        end
    end
end)

-- توصيل أزرار السبام الجديدة المعدلة
spamButtonInstances["spam1"].MouseButton1Click:Connect(sendSpam1)
spamButtonInstances["spam2"].MouseButton1Click:Connect(sendSpam2)
spamButtonInstances["spam3"].MouseButton1Click:Connect(sendSpam3)
spamButtonInstances["spam4"].MouseButton1Click:Connect(sendSpam4)
spamButtonInstances["spam5"].MouseButton1Click:Connect(sendSpam5)

spamButtonInstances["autoSpam1"].MouseButton1Click:Connect(function()
    toggleAutoSpam("autoSpam1", sendSpam1)
end)

spamButtonInstances["autoSpam2"].MouseButton1Click:Connect(function()
    toggleAutoSpam("autoSpam2", sendSpam2)
end)

spamButtonInstances["autoSpam3"].MouseButton1Click:Connect(function()
    toggleAutoSpam("autoSpam3", sendSpam3)
end)

spamButtonInstances["autoSpam4"].MouseButton1Click:Connect(function()
    toggleAutoSpam("autoSpam4", sendSpam4)
end)

spamButtonInstances["autoSpam5"].MouseButton1Click:Connect(function()
    toggleAutoSpam("autoSpam5", sendSpam5)
end)

-- توصيل أزرار المميزات الجديدة
featuresButtonInstances["noclip"].MouseButton1Click:Connect(toggleNoclip)
featuresButtonInstances["cameraLock"].MouseButton1Click:Connect(executeCameraLock)
featuresButtonInstances["night"].MouseButton1Click:Connect(setNight)
featuresButtonInstances["day"].MouseButton1Click:Connect(setDay)
featuresButtonInstances["rain"].MouseButton1Click:Connect(setRain)
featuresButtonInstances["snow"].MouseButton1Click:Connect(setSnow)
featuresButtonInstances["fog"].MouseButton1Click:Connect(setFog)
featuresButtonInstances["storm"].MouseButton1Click:Connect(setStorm)
featuresButtonInstances["morning"].MouseButton1Click:Connect(setMorning)
featuresButtonInstances["sunny"].MouseButton1Click:Connect(setSunny)
featuresButtonInstances["realism"].MouseButton1Click:Connect(setRealism)

-- توصيل الأزرار الجديدة في قسم المميزات
featuresButtonInstances["antiGrab"].MouseButton1Click:Connect(toggleAntiGrab)
featuresButtonInstances["antiCopy"].MouseButton1Click:Connect(toggleAntiCopy)
featuresButtonInstances["antiCopyNoMod"].MouseButton1Click:Connect(toggleAntiCopyNoMod)
featuresButtonInstances["commandField"].MouseButton1Click:Connect(toggleCommandField)
featuresButtonInstances["wa7eedTitle"].MouseButton1Click:Connect(executeWa7eedTitle)
featuresButtonInstances["2everTitle"].MouseButton1Click:Connect(execute2everTitle)
featuresButtonInstances["joinLeaveNotif"].MouseButton1Click:Connect(toggleJoinLeaveNotif)
featuresButtonInstances["serverCount"].MouseButton1Click:Connect(showServerCount)
featuresButtonInstances["waveTool"].MouseButton1Click:Connect(toggleWaveTool)
featuresButtonInstances["flashlightTool"].MouseButton1Click:Connect(toggleFlashlightTool)
featuresButtonInstances["playerList"].MouseButton1Click:Connect(togglePlayerList)

-- حدث خروج اللاعبين
Players.PlayerRemoving:Connect(function(leavingPlayer)
    if currentVictim and leavingPlayer.Name == currentVictim then
        showNotification("🚪 الضحية " .. leavingPlayer.Name .. " خرج من السيرفر", {
            Image = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. leavingPlayer.UserId .. "&width=150&height=150&format=png"
        }, true)
        
        -- حفظ حالة الأزرار النشطة قبل إيقافها
        bangWasActive = bangActive
        bangFrontWasActive = bangFrontFollowing
        
        -- إيقاف الأزرار النشطة عند خروج الضحية
        if bangActive then stopBang() end
        if bangFrontFollowing then stopBangFront() end
        if headSucking then stopHeadSuck() end
        if bangChaosActive then
            bangChaosActive = false
            if bangChaosThread then
                bangChaosThread = nil
            end
            buttonInstances["bangChaos"].Text = "بانق تشويش"
            buttonInstances["bangChaos"].BackgroundColor3 = Color3.new(0, 0, 0)
        end
        
        -- إيقاف جميع الأزرار التلقائية
        for buttonType, _ in pairs(autoButtonsActive) do
            if autoButtonsActive[buttonType] then
                autoButtonsActive[buttonType] = false
                if autoButtonsThreads[buttonType] then
                    autoButtonsThreads[buttonType] = nil
                end
                if buttonInstances[buttonType] then
                    buttonInstances[buttonType].Text = string.gsub(buttonInstances[buttonType].Text, " ✅", "")
                    buttonInstances[buttonType].BackgroundColor3 = Color3.new(0, 0, 0)
                end
            end
        end
        
        currentVictim = nil
        updateVictimInfo(nil)
    end
end)

-- حدث دخول اللاعبين
Players.PlayerAdded:Connect(function(joiningPlayer)
    if lastVictim and joiningPlayer.Name == lastVictim and not currentVictim then
        wait(2) -- انتظار تحميل اللاعب
        updateVictimInfo(joiningPlayer)
        
        showNotification("✅ الضحية " .. joiningPlayer.Name .. " دخل السيرفر", {
            Image = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. joiningPlayer.UserId .. "&width=150&height=150&format=png"
        }, false)
        
        -- إعادة تفعيل الأزرار النشطة عند عودة الضحية (فقط إذا لم يتم تحديد ضحية جديدة)
        if not currentVictim then
            restartActiveEffects()
        end
    end
end)

-- إضافة أداة التحديد التلقائية عند بدء التشغيل
local function addSelectionTool()
    wait(3) -- انتظار تحميل اللعبة
    
    local selectionTool = Instance.new("Tool")
    selectionTool.Name = "SelectionTool"
    selectionTool.ToolTip = "أداة التحديد - Wa7eed"
    
    local handle = Instance.new("Part")
    handle.Name = "Handle"
    handle.Size = Vector3.new(1, 1, 1)
    handle.BrickColor = BrickColor.new("Bright green")
    handle.Material = Enum.Material.Neon
    handle.Parent = selectionTool
    
    selectionTool.Activated:Connect(function()
        local character = player.Character
        if character then
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            local rootPart = character:FindFirstChild("HumanoidRootPart")
            
            if humanoid and rootPart then
                -- البحث عن اللاعب المستهدف
                local target = nil
                local closestDistance = 50 -- أقصى مسافة للتحديد
                
                for _, otherPlayer in pairs(Players:GetPlayers()) do
                    if otherPlayer ~= player and otherPlayer.Character then
                        local otherRoot = otherPlayer.Character:FindFirstChild("HumanoidRootPart")
                        if otherRoot then
                            local distance = (rootPart.Position - otherRoot.Position).Magnitude
                            if distance < closestDistance then
                                closestDistance = distance
                                target = otherPlayer
                            end
                        end
                    end
                end
                
                if target then
                    -- تحديث الضحية
                    updateVictimInfo(target)
                    showNotification("✅ تم تحديد الضحية: " .. target.Name, {
                        Image = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. target.UserId .. "&width=150&height=150&format=png"
                    }, false)
                else
                    showNotification("❌ لم يتم العثور على لاعب قريب", nil, false)
                end
            end
        end
    end)
    
    selectionTool.Parent = player.Backpack
end

-- تشغيل إضافة أداة التحديد
coroutine.wrap(addSelectionTool)()

-- جعل زر التفعيل قابل للسحب
ToggleButton.Active = true
ToggleButton.Draggable = true

-- التهيئة
showSection("الضحيه")

print("~ Wa7eed The CrAzY ~ تم تحميل السكربت المعدل بنجاح!")
print("✅ تم إضافة جميع التعديلات الجديدة!")
print("✅ تم تحسين مضاد الكلبشه!")
print("✅ تم تعديل حقل الأوامر!")
print("✅ تم إصلاح زر لوك الكاميرا!")
print("✅ تم جعل السبام التلقائي 3 سريع جداً!")
print("✅ تم إضافة نظام إعادة التفعيل التلقائي!")
print("✅ تم إضافة أداة التحديد التلقائية!")
print("✅ تم إضافة معلومات الضحية المفصلة!")
print("✅ تم إضافة جميع الأزرار الجديدة في قسم المميزات!")
print("✅ تم إضافة زر بانق تشويش الجديد!")
